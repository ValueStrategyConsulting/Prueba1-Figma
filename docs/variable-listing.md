# Variable Listing -- OCP Maintenance AI MVP

> **Generated from source code** -- `tools/models/schemas.py`, `api/database/models.py`,
> `tools/engines/`, `api/routers/`, and `templates/generate_templates.py`.
> Covers all enumerations, database columns, API endpoint fields, KPI definitions,
> the 72 valid Failure Mode combinations, and all 14 Excel template field schemas.

---

## Section A: Enumeration Types

All `str, Enum` classes defined in `tools/models/schemas.py`, organized by domain.

---

### A.1 Equipment & Hierarchy Domain

#### A.1.1 `EquipmentCriticality`

OCP criticality grades for equipment ranking.

| Value | Description |
|-------|-------------|
| `AA` | Double-A -- highest criticality |
| `A+` | A-plus -- very high criticality |
| `A` | A-grade criticality |
| `B` | B-grade criticality |
| `C` | C-grade criticality |
| `D` | D-grade -- lowest criticality |

#### A.1.2 `EquipmentStatus`

Lifecycle state of a physical asset.

| Value | Description |
|-------|-------------|
| `ACTIVE` | Equipment is in operation |
| `INACTIVE` | Equipment is idle / mothballed |
| `DECOMMISSIONED` | Equipment permanently removed |

#### A.1.3 `NodeType`

Level type in the 6-level plant hierarchy.

| Value | Level | Description |
|-------|-------|-------------|
| `PLANT` | 1 | Top-level facility |
| `AREA` | 2 | Functional area within plant |
| `SYSTEM` | 3 | Process system |
| `EQUIPMENT` | 4 | Physical equipment item |
| `SUB_ASSEMBLY` | 5 | Sub-assembly of equipment |
| `MAINTAINABLE_ITEM` | 6 | Lowest replaceable component |

#### A.1.4 `EquipmentCategory`

Classification of equipment by type (Module 4 library).

| Value | Description |
|-------|-------------|
| `PUMP` | Centrifugal, positive displacement, etc. |
| `CONVEYOR` | Belt, screw, chain conveyors |
| `CRUSHER` | Jaw, cone, gyratory crushers |
| `MILL` | SAG, ball, rod mills |
| `FLOTATION_CELL` | Flotation separation |
| `THICKENER` | Thickening/settling |
| `DRYER` | Drying equipment |
| `KILN` | Rotary kilns |
| `MOTOR` | Electric motors |
| `TRANSFORMER` | Electrical transformers |
| `COMPRESSOR` | Gas compressors |
| `VALVE` | Control / isolation valves |
| `TANK` | Storage / process tanks |
| `FILTER` | Filtration equipment |
| `AGITATOR` | Agitation equipment |
| `OTHER` | Uncategorised |

#### A.1.5 `ComponentCategory`

Component classification by discipline.

| Value | Description |
|-------|-------------|
| `MECHANICAL` | Mechanical components |
| `ELECTRICAL` | Electrical components |
| `INSTRUMENTATION` | Sensors, PLCs, transmitters |
| `STRUCTURAL` | Frames, housing, supports |
| `HYDRAULIC` | Hydraulic systems |
| `PNEUMATIC` | Pneumatic systems |

#### A.1.6 `LibrarySource`

Origin of a library item.

| Value | Description |
|-------|-------------|
| `R8_LIBRARY` | From R8 standard library |
| `OEM` | From OEM documentation |
| `CUSTOM` | User-defined |
| `AI_GENERATED` | Generated by AI engine |

---

### A.2 Field Capture Domain

#### A.2.1 `CaptureType`

Type of field data capture.

| Value | Description |
|-------|-------------|
| `VOICE` | Voice recording transcribed |
| `TEXT` | Typed text input |
| `IMAGE` | Photo capture only |
| `VOICE+IMAGE` | Combined voice + photo |

#### A.2.2 `Language`

Supported languages for field capture.

| Value | Description |
|-------|-------------|
| `fr` | French |
| `en` | English |
| `ar` | Arabic |

#### A.2.3 `ResolutionMethod`

How equipment was identified from field input.

| Value | Description |
|-------|-------------|
| `EXACT_MATCH` | Exact TAG/ID match |
| `FUZZY_MATCH` | Fuzzy text matching |
| `IMAGE_OCR` | OCR from photo |
| `MANUAL` | Manually selected |

#### A.2.4 `VisualSeverity`

Severity from image analysis.

| Value | Description |
|-------|-------------|
| `LOW` | Minor visual anomaly |
| `MEDIUM` | Moderate degradation |
| `HIGH` | Significant damage |
| `CRITICAL` | Immediate attention required |

---

### A.3 Work Orders Domain

#### A.3.1 `WorkRequestStatus`

Lifecycle of a structured work request.

| Value | Description |
|-------|-------------|
| `DRAFT` | Initial creation |
| `PENDING_VALIDATION` | Awaiting planner review |
| `VALIDATED` | Approved by planner |
| `REJECTED` | Rejected by planner |
| `SUBMITTED_TO_SAP` | Sent to SAP PM |

#### A.3.2 `WorkOrderType`

SAP PM order types.

| Value | Description |
|-------|-------------|
| `PM01_INSPECTION` | Inspection order |
| `PM02_PREVENTIVE` | Preventive maintenance |
| `PM03_CORRECTIVE` | Corrective maintenance |

#### A.3.3 `Priority`

Work order priority levels.

| Value | Description |
|-------|-------------|
| `1_EMERGENCY` | Immediate response |
| `2_URGENT` | Response within shift |
| `3_NORMAL` | Planned within week |
| `4_PLANNED` | Scheduled per plan |

#### A.3.4 `AvailabilityStatus`

Spare part stock status.

| Value | Description |
|-------|-------------|
| `IN_STOCK` | Available in warehouse |
| `LOW_STOCK` | Below reorder point |
| `OUT_OF_STOCK` | Zero on hand |
| `UNKNOWN` | Status not determined |

#### A.3.5 `BacklogWOType`

Simplified SAP order type for backlog.

| Value | Description |
|-------|-------------|
| `PM01` | Inspection |
| `PM02` | Preventive |
| `PM03` | Corrective |

#### A.3.6 `BacklogStatus`

Status of a backlog item.

| Value | Description |
|-------|-------------|
| `AWAITING_MATERIALS` | Blocked on parts |
| `AWAITING_SHUTDOWN` | Needs shutdown window |
| `AWAITING_RESOURCES` | No available workforce |
| `AWAITING_APPROVAL` | Pending authorization |
| `SCHEDULED` | Placed on schedule |
| `IN_PROGRESS` | Execution underway |

#### A.3.7 `WOHistoryStatus`

Work order lifecycle states (historical).

| Value | Description |
|-------|-------------|
| `CREATED` | WO created in system |
| `RELEASED` | WO released for scheduling |
| `IN_PROGRESS` | Execution started |
| `COMPLETED` | Work finished |
| `CLOSED` | Administratively closed |
| `CANCELLED` | WO cancelled |

#### A.3.8 `MaterialsReadyStatus`

Material readiness for a work package.

| Value | Description |
|-------|-------------|
| `READY` | All parts available |
| `PARTIAL` | Some parts missing |
| `NOT_READY` | Parts not available |

#### A.3.9 `AlertType`

Backlog alert categories.

| Value | Description |
|-------|-------------|
| `OVERDUE` | Item past due date |
| `MATERIAL_DELAY` | Material delivery delayed |
| `RESOURCE_CONFLICT` | Workforce double-booked |
| `PRIORITY_ESCALATION` | Priority has been raised |

#### A.3.10 `SAPWorkOrderStatus`

SAP PM work order system statuses.

| Value | Description |
|-------|-------------|
| `PLN` | Planned |
| `FMA` | Firm |
| `LPE` | Released for execution |
| `LIB` | Released |
| `IMPR` | In process |
| `NOTP` | Not planned |
| `NOTI` | Notification |
| `CTEC` | Technically completed |

#### A.3.11 `SAPNotificationStatus`

SAP PM notification statuses.

| Value | Description |
|-------|-------------|
| `MEAB` | Open |
| `METR` | In process |
| `ORAS` | Order assigned |
| `MECE` | Closed |

---

### A.4 Planner & Scheduling Domain

#### A.4.1 `ShiftType`

Shift definitions.

| Value | Description |
|-------|-------------|
| `MORNING` | Day shift |
| `AFTERNOON` | Swing shift |
| `NIGHT` | Night shift |

#### A.4.2 `ShutdownType`

Planned shutdown categories.

| Value | Description |
|-------|-------------|
| `MINOR_8H` | Minor -- up to 8 hours |
| `MAJOR_20H_PLUS` | Major -- 20+ hours |

#### A.4.3 `RiskLevel`

General risk classification.

| Value | Description |
|-------|-------------|
| `LOW` | Acceptable risk |
| `MEDIUM` | Monitor and plan |
| `HIGH` | Action required |
| `CRITICAL` | Immediate intervention |

#### A.4.4 `PlannerAction`

Actions a planner can take on a recommendation.

| Value | Description |
|-------|-------------|
| `APPROVE` | Accept as-is |
| `MODIFY` | Change details and approve |
| `ESCALATE` | Raise to management |
| `DEFER` | Postpone execution |

#### A.4.5 `PlanStrategy`

Maintenance plan strategy type.

| Value | Description |
|-------|-------------|
| `TIME_BASED` | Calendar/meter interval |
| `CONDITION_BASED` | Triggered by measurements |
| `PREDICTIVE` | Data-driven prediction |

#### A.4.6 `FrequencyUnit`

Units for maintenance task frequency.

| Value | Description |
|-------|-------------|
| `HOURS` | Calendar hours |
| `DAYS` | Calendar days |
| `WEEKS` | Calendar weeks |
| `MONTHS` | Calendar months |
| `YEARS` | Calendar years |
| `HOURS_RUN` | Running hours |
| `OPERATING_HOURS` | Operating hours |
| `TONNES` | Throughput in tonnes |
| `CYCLES` | Machine cycles |

#### A.4.7 `PlanStatus`

Maintenance plan lifecycle.

| Value | Description |
|-------|-------------|
| `ACTIVE` | Currently in effect |
| `SUSPENDED` | Temporarily paused |
| `DELETED` | Permanently removed |

#### A.4.8 `WeeklyProgramStatus`

Weekly scheduling program states.

| Value | Description |
|-------|-------------|
| `DRAFT` | Being assembled |
| `FINAL` | Locked for execution |
| `ACTIVE` | Currently executing |
| `COMPLETED` | Execution finished |

#### A.4.9 `SchedulingDayRole`

Purpose of each day in the weekly scheduling cycle.

| Value | Description |
|-------|-------------|
| `MEETING` | Scheduling coordination meeting |
| `ADJUSTMENT` | Mid-week adjustments |
| `FINAL_PROGRAM` | Final program freeze |
| `EXECUTION` | Execution day |

#### A.4.10 `ShutdownScope`

Scope classification for shutdown windows.

| Value | Description |
|-------|-------------|
| `MINOR_8H` | Minor -- up to 8 hours |
| `MAJOR_20H_PLUS` | Major -- 20+ hours |

#### A.4.11 `SupportTaskType`

Support activities required alongside work packages.

| Value | Description |
|-------|-------------|
| `LOTO` | Lock-out/Tag-out |
| `SCAFFOLDING` | Scaffolding erection/removal |
| `CRANE` | Crane mobilization |
| `MANLIFT` | Manlift requirement |
| `GUARD_REMOVAL` | Guard removal/reinstallation |
| `CLEANING` | Area cleaning |
| `COMMISSIONING` | Post-work commissioning |

#### A.4.12 `WorkPackageElementType`

Required elements of a complete work package.

| Value | Description |
|-------|-------------|
| `WORK_PERMIT` | Work permit document |
| `LOTO_CERT` | LOTO certificate |
| `MATERIAL_WITHDRAWAL` | Material issue slip |
| `CHECKLIST` | Pre-job checklist |
| `ATS_ART` | Risk analysis (ATS/ART) |
| `EXECUTION_PROCEDURE` | Step-by-step procedure |
| `WORK_ORDER` | SAP work order reference |

---

### A.5 Criticality & FMEA Domain

#### A.5.1 `CriticalityMethod`

Assessment methodology selector.

| Value | Description |
|-------|-------------|
| `FULL_MATRIX` | Full 11-category risk matrix |
| `SIMPLIFIED` | Simplified assessment |

#### A.5.2 `CriticalityCategory`

Risk consequence categories (R8 method).

| Value | Description |
|-------|-------------|
| `SAFETY` | Personnel safety impact |
| `HEALTH` | Occupational health impact |
| `ENVIRONMENT` | Environmental impact |
| `PRODUCTION` | Production loss |
| `OPERATING_COST` | Operating cost increase |
| `CAPITAL_COST` | Capital expenditure |
| `SCHEDULE` | Schedule impact |
| `REVENUE` | Revenue loss |
| `COMMUNICATIONS` | Communication systems |
| `COMPLIANCE` | Regulatory compliance |
| `REPUTATION` | Company reputation |

#### A.5.3 `RiskClass`

Resulting risk classification from assessment.

| Value | Description |
|-------|-------------|
| `I_LOW` | Class I -- Low risk |
| `II_MEDIUM` | Class II -- Medium risk |
| `III_HIGH` | Class III -- High risk |
| `IV_CRITICAL` | Class IV -- Critical risk |

#### A.5.4 `ApprovalStatus`

Approval workflow for strategy items.

| Value | Description |
|-------|-------------|
| `DRAFT` | Initial state |
| `REVIEWED` | Peer-reviewed |
| `APPROVED` | Management-approved |

#### A.5.5 `FunctionType`

Equipment function classification (RCM).

| Value | Description |
|-------|-------------|
| `PRIMARY` | Main intended function |
| `SECONDARY` | Supporting function |
| `PROTECTIVE` | Safety/protection function |

#### A.5.6 `FailureType`

Functional failure degree.

| Value | Description |
|-------|-------------|
| `TOTAL` | Complete loss of function |
| `PARTIAL` | Degraded performance |

#### A.5.7 `FMStatus`

Failure mode recommendation status.

| Value | Description |
|-------|-------------|
| `RECOMMENDED` | Active and recommended |
| `REDUNDANT` | Duplicate / not needed |

#### A.5.8 `CriticalityMode`

GFSN vs R8 assessment mode selector.

| Value | Description |
|-------|-------------|
| `R8` | R8 standard method |
| `GFSN` | GFSN OCP method |

#### A.5.9 `GFSNCriticalityBand`

GFSN criticality classification bands.

| Value | Description |
|-------|-------------|
| `ALTO` | High criticality |
| `MODERADO` | Moderate criticality |
| `BAJO` | Low criticality |

#### A.5.10 `GFSNConsequenceCategory`

GFSN consequence assessment dimensions.

| Value | Description |
|-------|-------------|
| `BUSINESS_IMPACT` | Business impact |
| `OPERATIONAL_COST` | Operational cost impact |
| `INTERRUPTION` | Service interruption |
| `SAFETY` | Safety impact |
| `ENVIRONMENT` | Environmental impact |
| `RSC` | Regulatory / Social / Community |

#### A.5.11 `PriorityMode`

Priority calculation method selector.

| Value | Description |
|-------|-------------|
| `ADDITIVE` | Simple additive scoring |
| `GFSN_MATRIX` | GFSN matrix method |

#### A.5.12 `GFSNPriority`

GFSN priority levels.

| Value | Description |
|-------|-------------|
| `ALTO` | High priority |
| `MODERADO` | Moderate priority |
| `BAJO` | Low priority |

---

### A.6 FMEA / RCM Domain

#### A.6.1 `Mechanism`

18 valid failure mechanisms from SRC-09.

| Value | Description |
|-------|-------------|
| `ARCS` | Electrical arcing |
| `BLOCKS` | Blockage / obstruction |
| `BREAKS_FRACTURE_SEPARATES` | Fracture or mechanical break |
| `CORRODES` | Corrosion degradation |
| `CRACKS` | Crack propagation |
| `DEGRADES` | General degradation |
| `DISTORTS` | Physical distortion |
| `DRIFTS` | Parameter drift |
| `EXPIRES` | End-of-life expiry |
| `IMMOBILISED` | Seizure / immobilization |
| `LOOSES_PRELOAD` | Loss of preload / fastener loosening |
| `OPEN_CIRCUIT` | Electrical open circuit |
| `OVERHEATS_MELTS` | Overheating or melting |
| `SEVERS` | Severing / cutting |
| `SHORT_CIRCUITS` | Electrical short circuit |
| `THERMALLY_OVERLOADS` | Thermal overload |
| `WASHES_OFF` | Wash-off / erosion |
| `WEARS` | Mechanical wear |

#### A.6.2 `Cause`

41 valid failure causes from SRC-09.

| Value | Description |
|-------|-------------|
| `ABRASION` | Abrasive wear |
| `AGE` | Age-related deterioration |
| `BREAKDOWN_IN_INSULATION` | Insulation breakdown |
| `BREAKDOWN_OF_LUBRICATION` | Lubrication failure |
| `BIO_ORGANISMS` | Biological organisms |
| `CHEMICAL_ATTACK` | Chemical attack |
| `CHEMICAL_REACTION` | Chemical reaction |
| `CONTAMINATION` | Contamination ingress |
| `CORROSIVE_ENVIRONMENT` | Corrosive environment exposure |
| `CREEP` | Material creep |
| `CREVICE` | Crevice corrosion |
| `CYCLIC_LOADING` | Cyclic fatigue loading |
| `DISSIMILAR_METALS_CONTACT` | Galvanic corrosion |
| `ELECTRICAL_ARCING` | Electrical arcing damage |
| `ELECTRICAL_OVERLOAD` | Electrical overload |
| `ENTRAINED_AIR` | Entrained air / cavitation |
| `EXCESSIVE_FLUID_VELOCITY` | Excessive fluid velocity |
| `EXCESSIVE_PARTICLE_SIZE` | Oversized particles |
| `EXCESSIVE_TEMPERATURE` | Excessive temperature |
| `EXPOSURE_TO_ATMOSPHERE` | Atmospheric exposure |
| `EXPOSURE_TO_HIGH_TEMP_CORROSIVE` | High-temperature corrosive exposure |
| `EXPOSURE_TO_HIGH_TEMP` | High-temperature exposure |
| `EXPOSURE_TO_LIQUID_METAL` | Liquid metal contact |
| `HIGH_TEMP_CORROSIVE` | High-temperature corrosion |
| `IMPACT_SHOCK_LOADING` | Impact / shock load |
| `INSUFFICIENT_FLUID_VELOCITY` | Insufficient fluid velocity |
| `LACK_OF_LUBRICATION` | Lubrication starvation |
| `LOW_PRESSURE` | Low fluid pressure |
| `LUBRICANT_CONTAMINATION` | Contaminated lubricant |
| `MECHANICAL_OVERLOAD` | Mechanical overload |
| `METAL_TO_METAL_CONTACT` | Dry metal contact |
| `OFF_CENTER_LOADING` | Misaligned / off-center load |
| `OVERCURRENT` | Overcurrent condition |
| `POOR_ELECTRICAL_CONNECTIONS` | Poor electrical connections |
| `POOR_ELECTRICAL_INSULATION` | Poor electrical insulation |
| `RADIATION` | Radiation damage |
| `RELATIVE_MOVEMENT` | Relative movement / fretting |
| `RUBBING` | Rubbing contact |
| `STRAY_CURRENT` | Stray electrical current |
| `THERMAL_OVERLOAD` | Thermal overload |
| `THERMAL_STRESSES` | Thermal stress cycling |
| `UNEVEN_LOADING` | Uneven loading |
| `USE` | Normal use / wear |
| `VIBRATION` | Vibration-induced loosening |

#### A.6.3 `FailurePattern`

RCM failure-rate curves (Nowlan-Heap).

| Value | Description |
|-------|-------------|
| `A_BATHTUB` | Pattern A -- bathtub curve (infant + wearout) |
| `B_AGE` | Pattern B -- age-related wearout |
| `C_FATIGUE` | Pattern C -- gradual fatigue increase |
| `D_STRESS` | Pattern D -- initial stress then flat |
| `E_RANDOM` | Pattern E -- constant random failure |
| `F_EARLY_LIFE` | Pattern F -- infant mortality then flat |

#### A.6.4 `FailureConsequence`

RCM consequence classification.

| Value | Description |
|-------|-------------|
| `HIDDEN_SAFETY` | Hidden failure with safety impact |
| `HIDDEN_NONSAFETY` | Hidden failure without safety impact |
| `EVIDENT_SAFETY` | Evident failure with safety impact |
| `EVIDENT_ENVIRONMENTAL` | Evident failure with environmental impact |
| `EVIDENT_OPERATIONAL` | Evident failure with production impact |
| `EVIDENT_NONOPERATIONAL` | Evident failure -- no direct impact |

#### A.6.5 `StrategyType`

RCM maintenance strategy selection.

| Value | Description |
|-------|-------------|
| `CONDITION_BASED` | Condition monitoring / on-condition task |
| `FIXED_TIME` | Fixed interval replacement / overhaul |
| `RUN_TO_FAILURE` | No planned maintenance |
| `FAULT_FINDING` | Periodic hidden-function check |
| `REDESIGN` | Design change required |
| `OEM` | Follow OEM recommendation |

#### A.6.6 `FMECAStage`

Progressive FMECA worksheet stages.

| Value | Description |
|-------|-------------|
| `STAGE_1_FUNCTIONS` | Define functions |
| `STAGE_2_FAILURES` | Identify functional failures |
| `STAGE_3_EFFECTS` | Analyse failure effects |
| `STAGE_4_DECISIONS` | RCM decision logic |

#### A.6.7 `FMECAWorksheetStatus`

FMECA worksheet lifecycle.

| Value | Description |
|-------|-------------|
| `DRAFT` | Being developed |
| `IN_PROGRESS` | Analysis underway |
| `COMPLETED` | Analysis complete |
| `APPROVED` | Reviewed and approved |

#### A.6.8 `RPNCategory`

Risk Priority Number classification (FMECA).

| Value | Description |
|-------|-------------|
| `LOW` | RPN in low range |
| `MEDIUM` | RPN in medium range |
| `HIGH` | RPN in high range |
| `CRITICAL` | RPN in critical range |

#### A.6.9 `JustificationCategory`

Justification for strategy changes vs. existing plans.

| Value | Description |
|-------|-------------|
| `MODIFIED` | Existing task modified |
| `ELIMINATED` | Existing task removed |
| `FREQUENCY_CHANGE` | Frequency adjusted |
| `TACTIC_CHANGE` | Strategy/tactic changed |
| `MAINTAINED` | Kept as-is |
| `NEW_TASK` | Brand new task added |

---

### A.7 Task & Work Package Domain

#### A.7.1 `TaskType`

Maintenance task classifications.

| Value | Description |
|-------|-------------|
| `INSPECT` | Visual / sensory inspection |
| `CHECK` | Functional check / measurement |
| `TEST` | Diagnostic test |
| `LUBRICATE` | Lubrication task |
| `CLEAN` | Cleaning task |
| `REPLACE` | Component replacement |
| `REPAIR` | Repair activity |
| `CALIBRATE` | Instrument calibration |

#### A.7.2 `TaskConstraint`

Task execution constraint.

| Value | Description |
|-------|-------------|
| `ONLINE` | Can run while equipment operates |
| `OFFLINE` | Requires equipment shutdown |
| `TEST_MODE` | Requires test / bypass mode |

#### A.7.3 `LabourSpecialty`

Workforce trade specialty.

| Value | Description |
|-------|-------------|
| `FITTER` | Mechanical fitter |
| `ELECTRICIAN` | Electrician |
| `INSTRUMENTIST` | Instrument technician |
| `OPERATOR` | Plant operator |
| `CONMON_SPECIALIST` | Condition monitoring specialist |
| `LUBRICATOR` | Lubrication technician |

#### A.7.4 `UnitOfMeasure`

Material quantity units.

| Value | Description |
|-------|-------------|
| `EA` | Each (unit) |
| `L` | Litre |
| `KG` | Kilogram |
| `M` | Metre |

#### A.7.5 `BudgetType`

Budget classification for tasks.

| Value | Description |
|-------|-------------|
| `REPAIR` | Repair budget |
| `REPLACE` | Replacement budget |

#### A.7.6 `WPType`

Work package grouping strategy.

| Value | Description |
|-------|-------------|
| `STANDALONE` | Single independent package |
| `SUPPRESSIVE` | Grouped to suppress shutdown count |
| `SEQUENTIAL` | Must execute in sequence |

#### A.7.7 `WPConstraint`

Work package shutdown requirement.

| Value | Description |
|-------|-------------|
| `ONLINE` | No shutdown required |
| `OFFLINE` | Shutdown required |

#### A.7.8 `WPApprovalStatus`

Work package approval lifecycle.

| Value | Description |
|-------|-------------|
| `DRAFT` | Being assembled |
| `REVIEWED` | Peer-reviewed |
| `APPROVED` | Management-approved |
| `UPLOADED_TO_SAP` | Transferred to SAP PM |

---

### A.8 SAP Integration Domain

#### A.8.1 `SAPUploadStatus`

SAP upload package lifecycle.

| Value | Description |
|-------|-------------|
| `GENERATED` | Package generated by system |
| `REVIEWED` | Reviewed by planner |
| `APPROVED` | Approved for upload |
| `UPLOADED` | Successfully uploaded to SAP |

---

### A.9 Spare Parts & Reliability Domain

#### A.9.1 `MaterialCriticality`

Spare part criticality classification.

| Value | Description |
|-------|-------------|
| `CRITICAL` | Failure causes immediate stoppage |
| `IMPORTANT` | Failure degrades performance |
| `STANDARD` | Routine consumable |

#### A.9.2 `SparePartCriticality`

VED analysis classification.

| Value | Description |
|-------|-------------|
| `VITAL` | Production stops without this part |
| `ESSENTIAL` | Significant impact if unavailable |
| `DESIRABLE` | Nice-to-have in stock |

#### A.9.3 `ConsumptionClass`

FSN inventory velocity classification.

| Value | Description |
|-------|-------------|
| `FAST_MOVING` | High consumption rate |
| `SLOW_MOVING` | Low consumption rate |
| `NON_MOVING` | No movement in review period |

#### A.9.4 `CostClass`

ABC cost-based inventory classification.

| Value | Description |
|-------|-------------|
| `A_HIGH` | High-value items (~20% SKUs, ~80% value) |
| `B_MEDIUM` | Medium-value items |
| `C_LOW` | Low-value items (~80% SKUs, ~20% value) |

#### A.9.5 `ShutdownStatus`

Shutdown event lifecycle.

| Value | Description |
|-------|-------------|
| `PLANNED` | Scheduled for future |
| `IN_PROGRESS` | Currently executing |
| `COMPLETED` | Successfully finished |
| `CANCELLED` | Cancelled |

#### A.9.6 `MoCStatus`

Management of Change request lifecycle.

| Value | Description |
|-------|-------------|
| `DRAFT` | Being prepared |
| `SUBMITTED` | Submitted for review |
| `REVIEWING` | Under review |
| `APPROVED` | Approved |
| `IMPLEMENTING` | Being implemented |
| `CLOSED` | Implementation verified |
| `REJECTED` | Rejected |

#### A.9.7 `MoCCategory`

Management of Change classification.

| Value | Description |
|-------|-------------|
| `EQUIPMENT_MODIFICATION` | Physical equipment change |
| `PROCESS_CHANGE` | Process parameter change |
| `STRATEGY_CHANGE` | Maintenance strategy change |
| `MATERIAL_SUBSTITUTION` | Alternative material/part |
| `PROCEDURE_UPDATE` | Procedure revision |

#### A.9.8 `JackKnifeZone`

Jack-Knife diagram zone classification (REF-13 7.5.4).

| Value | Description |
|-------|-------------|
| `ACUTE` | High frequency, high downtime per event |
| `CHRONIC` | High frequency, low downtime per event |
| `COMPLEX` | Low frequency, high downtime per event |
| `CONTROLLED` | Low frequency, low downtime per event |

#### A.9.9 `DamageMechanism`

RBI damage mechanism classification.

| Value | Description |
|-------|-------------|
| `CORROSION` | General or localised corrosion |
| `FATIGUE` | Cyclic fatigue |
| `CREEP` | High-temperature creep |
| `EROSION` | Erosive wear |
| `STRESS_CORROSION` | Stress corrosion cracking |
| `HYDROGEN_DAMAGE` | Hydrogen embrittlement |
| `OTHER` | Other mechanisms |

#### A.9.10 `InspectionTechnique`

RBI recommended inspection methods.

| Value | Description |
|-------|-------------|
| `VISUAL` | Visual inspection |
| `ULTRASONIC_THICKNESS` | UT thickness measurement |
| `MAGNETIC_PARTICLE` | MPI |
| `DYE_PENETRANT` | DPI / LPI |
| `RADIOGRAPHY` | Radiographic testing |
| `EDDY_CURRENT` | Eddy current testing |
| `ACOUSTIC_EMISSION` | Acoustic emission monitoring |

---

### A.10 KPI & Governance Domain

#### A.10.1 `KPIStatus`

KPI target attainment status.

| Value | Description |
|-------|-------------|
| `ON_TARGET` | Meeting or exceeding target |
| `BELOW_TARGET` | Below target |
| `ABOVE_TARGET` | Above target (may be negative for lower-is-better) |

#### A.10.2 `CAPAStatus`

CAPA lifecycle (ISO 55002 10.2).

| Value | Description |
|-------|-------------|
| `OPEN` | Newly created |
| `IN_PROGRESS` | Actions underway |
| `CLOSED` | Actions completed |
| `VERIFIED` | Effectiveness verified |

#### A.10.3 `CAPAType`

Corrective vs Preventive action.

| Value | Description |
|-------|-------------|
| `CORRECTIVE` | Corrective action |
| `PREVENTIVE` | Preventive action |

#### A.10.4 `PDCAPhase`

Deming PDCA cycle phases.

| Value | Description |
|-------|-------------|
| `PLAN` | Planning phase |
| `DO` | Execution phase |
| `CHECK` | Verification phase |
| `ACT` | Standardization phase |

#### A.10.5 `HealthDimension`

5 dimensions of the Asset Health Index (REF-12 Rec 4).

| Value | Description |
|-------|-------------|
| `CRITICALITY` | Equipment criticality assessment |
| `BACKLOG_PRESSURE` | Ratio of pending work to capacity |
| `STRATEGY_COVERAGE` | % failure modes with approved strategy |
| `CONDITION_STATUS` | Active condition monitoring alerts |
| `EXECUTION_COMPLIANCE` | On-time execution of planned work |

#### A.10.6 `VarianceLevel`

Multi-plant variance alert severity (REF-12 Rec 7).

| Value | Description |
|-------|-------------|
| `NORMAL` | Within 2 sigma of portfolio mean |
| `WARNING` | Between 2-3 sigma deviation |
| `CRITICAL` | Beyond 3 sigma deviation |

#### A.10.7 `ExpertDomain`

Expert specialization domains (Neuro-Arq TMS).

| Value | Description |
|-------|-------------|
| `RELIABILITY` | Reliability engineering |
| `MECHANICAL` | Mechanical maintenance |
| `ELECTRICAL` | Electrical maintenance |
| `INSTRUMENTATION` | Instrumentation & control |
| `PROCESS` | Process engineering |
| `SAFETY` | Safety engineering |
| `PLANNING` | Maintenance planning |
| `SPARE_PARTS` | Spare parts management |

#### A.10.8 `StakeholderRole`

Stakeholder roles (ISO 55002 4.2).

| Value | Description |
|-------|-------------|
| `MAINTENANCE_MANAGER` | Head of maintenance |
| `RELIABILITY_ENGINEER` | Reliability specialist |
| `PLANNER` | Maintenance planner |
| `TECHNICIAN` | Field technician |
| `OPERATOR` | Plant operator |
| `PLANT_MANAGER` | Plant director |
| `SAFETY_OFFICER` | HSE officer |
| `PROCUREMENT` | Procurement / stores |

#### A.10.9 `RCALevel`

RCA investigation depth level.

| Value | Description |
|-------|-------------|
| `1` | Level 1 -- Supervisor + operator |
| `2` | Level 2 -- Cross-functional team |
| `3` | Level 3 -- Full investigation with external support |

#### A.10.10 `RCAStatus`

RCA analysis lifecycle.

| Value | Description |
|-------|-------------|
| `OPEN` | Newly opened |
| `UNDER_INVESTIGATION` | Investigation underway |
| `COMPLETED` | Analysis completed |
| `REVIEWED` | Final review complete |

#### A.10.11 `EvidenceType`

RCA evidence classification.

| Value | Description |
|-------|-------------|
| `INFERRED` | Logically inferred |
| `SENSORY` | Directly observed |
| `HYPOTHESIS` | Hypothesized |

#### A.10.12 `RootCauseLevel`

Root cause depth classification.

| Value | Description |
|-------|-------------|
| `PHYSICAL` | Physical root cause |
| `HUMAN` | Human error root cause |
| `LATENT` | Systemic / organizational |

#### A.10.13 `Evidence5PCategory`

5P evidence collection categories.

| Value | Description |
|-------|-------------|
| `PARTS` | Physical parts evidence |
| `POSITION` | Location / position evidence |
| `PEOPLE` | Human witness evidence |
| `PAPERS` | Documentation evidence |
| `PARADIGMS` | Organizational / cultural patterns |

#### A.10.14 `SolutionQuadrant`

Solution prioritization quadrant.

| Value | Description |
|-------|-------------|
| `HIGH_BENEFIT_LOW_DIFFICULTY` | Quick wins -- implement first |
| `HIGH_BENEFIT_HIGH_DIFFICULTY` | Strategic projects |
| `LOW_BENEFIT_LOW_DIFFICULTY` | Nice-to-have |
| `LOW_BENEFIT_HIGH_DIFFICULTY` | Avoid / deprioritize |

---

### A.11 Reporting & Dashboard Domain

#### A.11.1 `ReportType`

Generated report types.

| Value | Description |
|-------|-------------|
| `WEEKLY_MAINTENANCE` | Weekly maintenance summary |
| `MONTHLY_KPI` | Monthly KPI report |
| `QUARTERLY_REVIEW` | Quarterly management review |

#### A.11.2 `NotificationType`

System alert notification types.

| Value | Description |
|-------|-------------|
| `RBI_OVERDUE` | Overdue RBI inspection |
| `KPI_BREACH` | KPI target breach |
| `EQUIPMENT_RISK` | Equipment risk escalation |
| `BACKLOG_AGING` | Aging backlog items |
| `CAPA_OVERDUE` | Overdue CAPA actions |
| `MOC_OVERDUE` | Overdue MoC requests |

#### A.11.3 `NotificationLevel`

Alert severity.

| Value | Description |
|-------|-------------|
| `INFO` | Informational |
| `WARNING` | Warning |
| `CRITICAL` | Critical |

#### A.11.4 `ExportFormat`

Data export format options.

| Value | Description |
|-------|-------------|
| `EXCEL` | Microsoft Excel (.xlsx) |
| `CSV` | Comma-separated values |
| `PDF` | PDF document |

#### A.11.5 `ImportSource`

Import data source types.

| Value | Description |
|-------|-------------|
| `EQUIPMENT_HIERARCHY` | Equipment hierarchy import |
| `FAILURE_HISTORY` | Failure history import |
| `MAINTENANCE_PLAN` | Maintenance plan import |

#### A.11.6 `CorrelationType`

Cross-module correlation analysis types.

| Value | Description |
|-------|-------------|
| `CRITICALITY_FAILURES` | Criticality vs failure frequency |
| `COST_RELIABILITY` | Cost vs reliability metrics |
| `HEALTH_BACKLOG` | Health score vs backlog pressure |

#### A.11.7 `TrafficLight`

Dashboard traffic light indicators.

| Value | Description |
|-------|-------------|
| `GREEN` | On target |
| `AMBER` | Warning zone |
| `RED` | Off target |

---

### A.12 Phase 7 Domain

#### A.12.1 `WorkPackageReadiness`

Assembly readiness status.

| Value | Description |
|-------|-------------|
| `NOT_STARTED` | No elements assembled |
| `PARTIAL` | Some elements present |
| `READY` | All elements present |
| `BLOCKED` | Missing critical element |

#### A.12.2 `ElementReadinessStatus`

Individual element readiness.

| Value | Description |
|-------|-------------|
| `MISSING` | Not yet created |
| `DRAFT` | Draft version available |
| `READY` | Final version available |
| `EXPIRED` | Expired, needs renewal |

#### A.12.3 `SupportTaskStatus`

Support task progress.

| Value | Description |
|-------|-------------|
| `PENDING` | Not yet started |
| `IN_PROGRESS` | Underway |
| `COMPLETED` | Done |
| `SKIPPED` | Not required / skipped |

#### A.12.4 `ConflictResolutionType`

Scheduling conflict resolution strategies.

| Value | Description |
|-------|-------------|
| `RESCHEDULE` | Move to different date/shift |
| `SPLIT_PACKAGE` | Break package into parts |
| `ADD_SHIFT` | Add extra shift |
| `REASSIGN_SPECIALTY` | Use alternate trade |
| `EXTEND_WINDOW` | Extend shutdown window |

---

## Section B: Database Fields

All SQLAlchemy table definitions from `api/database/models.py`.

---

### B.1 `plants`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `plant_id` | String(50) | **PK** | SAP Plant code (e.g., `OCP-JFC1`) |
| `name` | String(200) | NOT NULL | Plant name (English) |
| `name_fr` | String(200) | default="" | Plant name (French) |
| `name_ar` | String(200) | default="" | Plant name (Arabic) |
| `location` | String(200) | default="" | Geographic location |

### B.2 `hierarchy_nodes`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `node_id` | String(50) | **PK**, default=uuid | Unique node identifier |
| `node_type` | String(30) | NOT NULL | NodeType enum value |
| `name` | String(200) | NOT NULL | Node name (English) |
| `name_fr` | String(200) | default="" | Node name (French) |
| `code` | String(100) | indexed | Technical code |
| `parent_node_id` | String(50) | **FK** hierarchy_nodes.node_id, nullable | Parent reference (self-referential) |
| `level` | Integer | NOT NULL | Hierarchy level (1-6) |
| `plant_id` | String(50) | **FK** plants.plant_id, nullable | Owning plant |
| `tag` | String(100) | nullable, indexed | Equipment TAG |
| `criticality` | String(10) | nullable | EquipmentCriticality value |
| `status` | String(30) | default="ACTIVE" | EquipmentStatus value |
| `equipment_lib_ref` | String(50) | nullable | Equipment library reference |
| `component_lib_ref` | String(50) | nullable | Component library reference |
| `sap_func_loc` | String(100) | nullable | SAP functional location |
| `sap_equipment_nr` | String(100) | nullable | SAP equipment number |
| `order` | Integer | default=1 | Display order within parent |
| `metadata_json` | JSON | nullable | NodeMetadata as JSON |

**Indexes:** `ix_hierarchy_nodes_parent`, `ix_hierarchy_nodes_level_type`

### B.3 `criticality_assessments`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `assessment_id` | String(50) | **PK**, default=uuid | Assessment identifier |
| `node_id` | String(50) | **FK** hierarchy_nodes.node_id | Assessed node |
| `assessed_at` | DateTime | default=now | Assessment timestamp |
| `assessed_by` | String(100) | default="system" | Assessor name |
| `method` | String(30) | NOT NULL | FULL_MATRIX or SIMPLIFIED |
| `criteria_scores` | JSON | NOT NULL | list[CriteriaScore] |
| `probability` | Integer | NOT NULL | 1-5 probability rating |
| `overall_score` | Float | default=0.0 | Computed overall risk score |
| `risk_class` | String(20) | NOT NULL | RiskClass value |
| `ai_suggested_class` | String(20) | nullable | AI recommendation |
| `ai_justification` | Text | nullable | AI reasoning |
| `status` | String(20) | default="DRAFT" | ApprovalStatus value |

### B.4 `functions`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `function_id` | String(50) | **PK**, default=uuid | Function identifier |
| `node_id` | String(50) | **FK** hierarchy_nodes.node_id | Equipment node |
| `function_type` | String(20) | NOT NULL | PRIMARY, SECONDARY, PROTECTIVE |
| `description` | Text | NOT NULL | Function description (English) |
| `description_fr` | Text | default="" | Function description (French) |
| `performance_standard` | Text | nullable | Performance criteria |
| `ai_generated` | Boolean | default=False | AI-generated flag |
| `status` | String(20) | default="DRAFT" | ApprovalStatus value |

### B.5 `functional_failures`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `failure_id` | String(50) | **PK**, default=uuid | Failure identifier |
| `function_id` | String(50) | **FK** functions.function_id | Parent function |
| `failure_type` | String(20) | NOT NULL | TOTAL or PARTIAL |
| `description` | Text | NOT NULL | Failure description (English) |
| `description_fr` | Text | default="" | Failure description (French) |

### B.6 `failure_modes`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `failure_mode_id` | String(50) | **PK**, default=uuid | FM identifier |
| `functional_failure_id` | String(50) | **FK** functional_failures.failure_id | Parent failure |
| `fm_status` | String(20) | default="RECOMMENDED" | RECOMMENDED or REDUNDANT |
| `what` | String(200) | NOT NULL | FM description (starts uppercase) |
| `mechanism` | String(50) | NOT NULL | Mechanism enum value |
| `cause` | String(50) | NOT NULL | Cause enum value |
| `failure_pattern` | String(30) | nullable | Nowlan-Heap pattern (A-F) |
| `failure_consequence` | String(30) | NOT NULL | FailureConsequence value |
| `is_hidden` | Boolean | default=False | Hidden failure flag |
| `failure_effect` | JSON | nullable | FailureEffect as JSON |
| `strategy_type` | String(30) | NOT NULL | StrategyType value |
| `ai_generated` | Boolean | default=False | AI-generated flag |
| `ai_confidence` | Float | nullable | AI confidence (0-1) |
| `existing_task_source` | String(200) | nullable | Source of existing task |
| `justification_category` | String(30) | nullable | JustificationCategory value |

**Indexes:** `ix_fm_mechanism_cause`

### B.7 `maintenance_tasks`

> **Note:** Tasks are standalone, reusable action definitions. They do NOT have frequency or acceptable limits -- those fields belong to the strategy level. Frequency and limits are defined when a task is linked to a failure mode via a maintenance strategy (see Template 14: `14_maintenance_strategy.xlsx`). The `frequency_value` and `frequency_unit` fields in the database are retained for backward compatibility with work packages but are NOT populated during task-only data loading (Template 04).

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `task_id` | String(50) | **PK**, default=uuid | Task identifier (reusable across strategies) |
| `failure_mode_id` | String(50) | **FK** failure_modes.failure_mode_id, nullable | Linked failure mode |
| `name` | String(72) | NOT NULL | Task name (max 72 chars for SAP) |
| `name_fr` | String(200) | default="" | Task name (French) |
| `task_type` | String(20) | NOT NULL | TaskType value |
| `is_secondary` | Boolean | default=False | Secondary task flag |
| `acceptable_limits` | Text | nullable | Acceptance criteria (strategy-level field) |
| `conditional_comments` | Text | nullable | Conditional notes (strategy-level field) |
| `consequences` | Text | default="" | Failure consequences |
| `justification` | Text | nullable | Task justification |
| `constraint` | String(20) | NOT NULL | ONLINE, OFFLINE, TEST_MODE |
| `access_time_hours` | Float | default=0.0 | Access/setup time |
| `frequency_value` | Float | NOT NULL | Interval value (set at strategy/WP level) |
| `frequency_unit` | String(30) | NOT NULL | FrequencyUnit value (set at strategy/WP level) |
| `origin` | String(200) | nullable | Task origin reference |
| `budget_type` | String(20) | nullable | NOT_BUDGETED, REPAIR, or REPLACE |
| `budgeted_life` | Float | nullable | Budgeted life value |
| `labour_resources` | JSON | nullable | list[LabourResource] |
| `material_resources` | JSON | nullable | list[MaterialResource] |
| `tools_list` | JSON | nullable | Required tools |
| `special_equipment` | JSON | nullable | Special equipment needed |
| `ai_generated` | Boolean | default=False | AI-generated flag |
| `ai_confidence` | Float | nullable | AI confidence (0-1) |
| `status` | String(20) | default="DRAFT" | ApprovalStatus value |

### B.8 `work_packages`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `work_package_id` | String(50) | **PK**, default=uuid | WP identifier |
| `name` | String(40) | NOT NULL | WP name (ALL CAPS, max 40) |
| `code` | String(50) | indexed | WP code |
| `node_id` | String(50) | **FK** hierarchy_nodes.node_id | Equipment node |
| `frequency_value` | Float | NOT NULL | Interval value |
| `frequency_unit` | String(30) | NOT NULL | FrequencyUnit value |
| `constraint` | String(20) | NOT NULL | ONLINE or OFFLINE |
| `access_time_hours` | Float | default=0.0 | Access/setup time |
| `work_package_type` | String(20) | NOT NULL | STANDALONE, SUPPRESSIVE, SEQUENTIAL |
| `job_preparation` | Text | nullable | Pre-job preparation notes |
| `post_shutdown` | Text | nullable | Post-shutdown activities |
| `allocated_tasks` | JSON | nullable | list[AllocatedTask] |
| `labour_summary` | JSON | nullable | LabourSummary |
| `material_summary` | JSON | nullable | list[MaterialSummaryEntry] |
| `sap_upload_ref` | JSON | nullable | SAPUploadRef |
| `status` | String(20) | default="DRAFT" | WPApprovalStatus value |

### B.9 `sap_upload_packages`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `package_id` | String(50) | **PK**, default=uuid | Package identifier |
| `generated_at` | DateTime | default=now | Generation timestamp |
| `plant_code` | String(50) | NOT NULL | SAP plant code |
| `maintenance_plan` | JSON | nullable | SAPMaintenancePlan |
| `maintenance_items` | JSON | nullable | list[SAPMaintenanceItem] |
| `task_lists` | JSON | nullable | list[SAPTaskList] |
| `status` | String(20) | default="GENERATED" | SAPUploadStatus value |

### B.10 `work_orders`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `work_order_id` | String(50) | **PK** | WO identifier |
| `order_type` | String(10) | NOT NULL | PM01, PM02, PM03 |
| `equipment_id` | String(100) | indexed | Equipment reference |
| `equipment_tag` | String(100) | default="" | Equipment TAG |
| `priority` | String(10) | NOT NULL | Priority (1-4) |
| `status` | String(20) | NOT NULL | WOHistoryStatus value |
| `created_date` | Date | NOT NULL | Creation date |
| `actual_duration_hours` | Float | nullable | Actual work duration |
| `description` | Text | default="" | WO description |
| `materials_consumed` | JSON | nullable | list[MaterialConsumed] |

### B.11 `health_scores`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `score_id` | String(50) | **PK**, default=uuid | Score identifier |
| `node_id` | String(50) | **FK** hierarchy_nodes.node_id | Assessed node |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `equipment_tag` | String(100) | NOT NULL | Equipment TAG |
| `calculated_at` | DateTime | default=now | Calculation timestamp |
| `dimensions` | JSON | nullable | list[HealthScoreDimension] |
| `composite_score` | Float | default=0.0 | Weighted composite (0-100) |
| `health_class` | String(20) | default="UNKNOWN" | HEALTHY, AT_RISK, CRITICAL, UNKNOWN |
| `trend` | String(20) | default="" | IMPROVING, STABLE, DEGRADING |
| `recommendations` | JSON | nullable | Action recommendations |

### B.12 `kpi_metrics`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `metrics_id` | String(50) | **PK**, default=uuid | Metrics identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `equipment_id` | String(100) | nullable | Equipment reference (null = plant-level) |
| `period_start` | Date | NOT NULL | Period start |
| `period_end` | Date | NOT NULL | Period end |
| `calculated_at` | DateTime | default=now | Calculation timestamp |
| `mtbf_days` | Float | nullable | Mean Time Between Failures (days) |
| `mttr_hours` | Float | nullable | Mean Time To Repair (hours) |
| `availability_pct` | Float | nullable | Availability (0-100%) |
| `oee_pct` | Float | nullable | Overall Equipment Effectiveness (0-100%) |
| `schedule_compliance_pct` | Float | nullable | Schedule compliance (0-100%) |
| `backlog_hours` | Float | default=0.0 | Pending backlog hours |
| `pm_compliance_pct` | Float | nullable | PM compliance (0-100%) |
| `total_work_orders` | Integer | default=0 | Total WO count |
| `corrective_wo_count` | Integer | default=0 | Corrective WO count |
| `preventive_wo_count` | Integer | default=0 | Preventive WO count |
| `reactive_ratio_pct` | Float | nullable | Corrective / Total ratio (0-100%) |

### B.13 `failure_predictions`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `prediction_id` | String(50) | **PK**, default=uuid | Prediction identifier |
| `equipment_id` | String(100) | indexed | Equipment reference |
| `equipment_tag` | String(100) | NOT NULL | Equipment TAG |
| `predicted_at` | DateTime | default=now | Prediction timestamp |
| `weibull_params` | JSON | nullable | WeibullParameters (beta, eta, gamma, r_squared) |
| `current_age_days` | Float | NOT NULL | Current age in days |
| `reliability_current` | Float | NOT NULL | R(t) at current age (0-1) |
| `predicted_failure_window_days` | Float | NOT NULL | Days until predicted failure |
| `confidence_level` | Float | default=0.9 | Confidence level (0.5-0.99) |
| `risk_score` | Float | default=0.0 | Risk score (0-100) |
| `failure_pattern` | String(30) | nullable | FailurePattern value |
| `recommendation` | Text | default="" | Action recommendation |
| `status` | String(20) | default="DRAFT" | ApprovalStatus value |

### B.14 `capa_items`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `capa_id` | String(50) | **PK**, default=uuid | CAPA identifier |
| `capa_type` | String(20) | NOT NULL | CORRECTIVE or PREVENTIVE |
| `title` | String(300) | NOT NULL | CAPA title |
| `description` | Text | NOT NULL | CAPA description |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `equipment_id` | String(100) | nullable | Equipment reference |
| `source` | String(100) | NOT NULL | Origin (audit, incident, etc.) |
| `root_cause` | Text | nullable | Root cause description |
| `current_phase` | String(10) | default="PLAN" | PDCAPhase value |
| `status` | String(20) | default="OPEN" | CAPAStatus value |
| `assigned_to` | String(100) | default="" | Responsible person |
| `created_at` | DateTime | default=now | Creation timestamp |
| `target_date` | Date | nullable | Due date |
| `closed_at` | DateTime | nullable | Closure timestamp |
| `verified_at` | DateTime | nullable | Verification timestamp |
| `actions_planned` | JSON | nullable | Planned action items |
| `actions_completed` | JSON | nullable | Completed action items |
| `effectiveness_verified` | Boolean | default=False | Verification flag |
| `lessons_learned` | Text | nullable | Lessons learned text |

### B.15 `variance_alerts`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `alert_id` | String(50) | **PK**, default=uuid | Alert identifier |
| `plant_id` | String(50) | NOT NULL | Alerting plant |
| `plant_name` | String(200) | NOT NULL | Plant name |
| `metric_name` | String(100) | NOT NULL | KPI metric name |
| `plant_value` | Float | NOT NULL | Plant metric value |
| `portfolio_mean` | Float | NOT NULL | Portfolio average |
| `portfolio_std` | Float | NOT NULL | Portfolio standard deviation |
| `z_score` | Float | NOT NULL | Z-score deviation |
| `variance_level` | String(20) | NOT NULL | NORMAL, WARNING, CRITICAL |
| `detected_at` | DateTime | default=now | Detection timestamp |
| `message` | Text | default="" | Alert message |

### B.16 `expert_cards`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `expert_id` | String(50) | **PK**, default=uuid | Expert card identifier |
| `user_id` | String(100) | indexed | User account ID |
| `name` | String(200) | NOT NULL | Expert name |
| `role` | String(50) | NOT NULL | StakeholderRole value |
| `plant_id` | String(50) | NOT NULL | Home plant |
| `domains` | JSON | nullable | list[ExpertDomain] |
| `equipment_expertise` | JSON | nullable | Equipment TAGs known |
| `certifications` | JSON | nullable | Certification list |
| `years_experience` | Integer | default=0 | Years of experience |
| `resolution_count` | Integer | default=0 | Issues resolved count |
| `last_active` | DateTime | nullable | Last activity timestamp |
| `contact_method` | String(200) | default="" | Preferred contact |
| `languages` | JSON | nullable | Spoken languages |

### B.17 `audit_log`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `id` | Integer | **PK**, autoincrement | Log entry ID |
| `entity_type` | String(50) | indexed | Entity type name |
| `entity_id` | String(50) | nullable | Entity identifier |
| `action` | String(20) | NOT NULL | CREATE, UPDATE, DELETE, APPROVE |
| `payload` | JSON | nullable | Change payload |
| `user` | String(100) | default="system" | Acting user |
| `timestamp` | DateTime | default=now, indexed | Event timestamp |

### B.18 `field_captures`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `capture_id` | String(50) | **PK**, default=uuid | Capture identifier |
| `technician_id` | String(100) | NOT NULL | Technician user ID |
| `capture_type` | String(20) | NOT NULL | CaptureType value |
| `language` | String(5) | default="en" | Detected language |
| `raw_text` | Text | nullable | Text input content |
| `raw_voice_text` | Text | nullable | Voice transcription |
| `images` | JSON | nullable | list[CaptureImage] |
| `equipment_tag_manual` | String(100) | nullable | Manually-entered TAG |
| `location_hint` | String(200) | nullable | Location description |
| `created_at` | DateTime | default=now | Capture timestamp |

### B.19 `work_requests`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `request_id` | String(50) | **PK**, default=uuid | Request identifier |
| `source_capture_id` | String(50) | **FK** field_captures.capture_id, nullable | Source capture |
| `status` | String(30) | default="DRAFT" | WorkRequestStatus value |
| `equipment_id` | String(100) | NOT NULL | Equipment reference |
| `equipment_tag` | String(100) | NOT NULL | Equipment TAG |
| `equipment_confidence` | Float | default=0.0 | ID confidence (0-1) |
| `resolution_method` | String(30) | default="MANUAL" | ResolutionMethod value |
| `problem_description` | JSON | nullable | ProblemDescription |
| `ai_classification` | JSON | nullable | AIClassification |
| `spare_parts` | JSON | nullable | list[SuggestedSparePart] |
| `image_analysis` | JSON | nullable | ImageAnalysis |
| `validation` | JSON | nullable | Validation |
| `created_at` | DateTime | default=now | Creation timestamp |

**Indexes:** `ix_work_requests_status`

### B.20 `planner_recommendations`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `recommendation_id` | String(50) | **PK**, default=uuid | Recommendation identifier |
| `work_request_id` | String(50) | **FK** work_requests.request_id | Linked work request |
| `resource_analysis` | JSON | nullable | ResourceAnalysis |
| `scheduling_suggestion` | JSON | nullable | SchedulingSuggestion |
| `risk_assessment` | JSON | nullable | RiskAssessment |
| `planner_action` | String(20) | NOT NULL | PlannerAction value |
| `ai_confidence` | Float | default=0.0 | AI confidence (0-1) |
| `generated_at` | DateTime | default=now | Generation timestamp |

### B.21 `backlog_items`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `backlog_id` | String(50) | **PK**, default=uuid | Backlog item identifier |
| `work_request_id` | String(50) | **FK** work_requests.request_id, nullable | Source work request |
| `equipment_id` | String(100) | NOT NULL | Equipment reference |
| `equipment_tag` | String(100) | NOT NULL | Equipment TAG |
| `priority` | String(20) | NOT NULL | Priority value |
| `wo_type` | String(10) | NOT NULL | PM01, PM02, PM03 |
| `status` | String(30) | default="AWAITING_APPROVAL" | BacklogStatus value |
| `blocking_reason` | String(200) | nullable | Reason for block |
| `estimated_hours` | Float | default=4.0 | Estimated duration |
| `specialties` | JSON | nullable | Required specialties |
| `materials_ready` | Boolean | default=False | Materials available flag |
| `shutdown_required` | Boolean | default=False | Shutdown needed flag |
| `age_days` | Integer | default=0 | Age in backlog |
| `created_at` | DateTime | default=now | Creation timestamp |

**Indexes:** `ix_backlog_items_priority`, `ix_backlog_items_status`

### B.22 `optimized_backlogs`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `optimization_id` | String(50) | **PK**, default=uuid | Optimization identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `period_start` | Date | NOT NULL | Period start |
| `period_end` | Date | NOT NULL | Period end |
| `total_items` | Integer | default=0 | Total backlog items |
| `stratification` | JSON | nullable | BacklogStratification |
| `work_packages` | JSON | nullable | list[BacklogWorkPackage] |
| `schedule` | JSON | nullable | list[ScheduleEntry] |
| `alerts` | JSON | nullable | list[BacklogAlert] |
| `status` | String(20) | default="DRAFT" | Status |
| `generated_at` | DateTime | default=now | Generation timestamp |

### B.23 `workforce`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `worker_id` | String(50) | **PK**, default=uuid | Worker identifier |
| `name` | String(200) | NOT NULL | Worker name |
| `specialty` | String(50) | NOT NULL | LabourSpecialty value |
| `shift` | String(20) | NOT NULL | ShiftType value |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `available` | Boolean | default=True | Availability flag |
| `certifications` | JSON | nullable | Certifications list |

### B.24 `shutdown_calendar`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `shutdown_id` | String(50) | **PK**, default=uuid | Shutdown identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `start_date` | Date | NOT NULL | Start date |
| `end_date` | Date | NOT NULL | End date |
| `shutdown_type` | String(30) | NOT NULL | MINOR_8H or MAJOR_20H_PLUS |
| `areas` | JSON | nullable | Affected areas |
| `description` | Text | default="" | Description |

### B.25 `inventory_items`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `item_id` | String(50) | **PK**, default=uuid | Item identifier |
| `material_code` | String(50) | indexed | SAP material code |
| `warehouse_id` | String(50) | default="WH-01" | Warehouse ID |
| `description` | String(300) | NOT NULL | Part description |
| `quantity_on_hand` | Integer | default=0 | On-hand quantity |
| `quantity_reserved` | Integer | default=0 | Reserved quantity |
| `quantity_available` | Integer | default=0 | Available quantity |
| `min_stock` | Integer | default=0 | Minimum stock level |
| `reorder_point` | Integer | default=0 | Reorder trigger point |
| `last_movement_date` | Date | nullable | Last stock movement |

### B.26 `weekly_programs`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `program_id` | String(50) | **PK**, default=uuid | Program identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `week_number` | Integer | NOT NULL | ISO week number |
| `year` | Integer | NOT NULL | Year |
| `status` | String(20) | default="DRAFT" | WeeklyProgramStatus value |
| `work_packages` | JSON | nullable | Scheduled work packages |
| `total_hours` | Float | default=0.0 | Total planned hours |
| `resource_slots` | JSON | nullable | list[ResourceSlot] |
| `conflicts` | JSON | nullable | list[ResourceConflict] |
| `support_tasks` | JSON | nullable | list[SupportTask] |
| `created_at` | DateTime | default=now | Creation timestamp |
| `finalized_at` | DateTime | nullable | Finalization timestamp |

**Indexes:** `ix_weekly_programs_plant_year_week`

### B.27 `shutdown_events`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `shutdown_id` | String(50) | **PK**, default=uuid | Shutdown identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `name` | String(200) | NOT NULL | Shutdown name |
| `status` | String(20) | default="PLANNED" | ShutdownStatus value |
| `planned_start` | DateTime | NOT NULL | Planned start datetime |
| `planned_end` | DateTime | NOT NULL | Planned end datetime |
| `actual_start` | DateTime | nullable | Actual start |
| `actual_end` | DateTime | nullable | Actual end |
| `planned_hours` | Float | default=0.0 | Planned duration |
| `actual_hours` | Float | default=0.0 | Actual duration |
| `work_orders` | JSON | nullable | WO list |
| `completed_work_orders` | JSON | nullable | Completed WO list |
| `completion_pct` | Float | default=0.0 | Completion percentage |
| `delay_hours` | Float | default=0.0 | Total delay |
| `delay_reasons` | JSON | nullable | Delay reason list |
| `created_at` | DateTime | default=now | Creation timestamp |

### B.28 `moc_requests`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `moc_id` | String(50) | **PK**, default=uuid | MoC identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `title` | String(300) | NOT NULL | MoC title |
| `description` | Text | default="" | MoC description |
| `category` | String(50) | default="EQUIPMENT_MODIFICATION" | MoCCategory value |
| `status` | String(20) | default="DRAFT" | MoCStatus value |
| `risk_level` | String(20) | default="LOW" | RiskLevel value |
| `requester_id` | String(50) | default="" | Requester ID |
| `reviewer_id` | String(50) | default="" | Reviewer ID |
| `approver_id` | String(50) | default="" | Approver ID |
| `affected_equipment` | JSON | nullable | Affected equipment list |
| `affected_procedures` | JSON | nullable | Affected procedures |
| `risk_assessment` | Text | default="" | Risk assessment text |
| `impact_analysis` | Text | default="" | Impact analysis text |
| `created_at` | DateTime | default=now | Creation timestamp |
| `submitted_at` | DateTime | nullable | Submission timestamp |
| `approved_at` | DateTime | nullable | Approval timestamp |
| `closed_at` | DateTime | nullable | Closure timestamp |

### B.29 `spare_part_analyses`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `analysis_id` | String(50) | **PK**, default=uuid | Analysis identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `analyzed_at` | DateTime | default=now | Analysis timestamp |
| `total_parts` | Integer | default=0 | Total parts analyzed |
| `results` | JSON | nullable | list[SparePartAnalysis] |
| `total_inventory_value` | Float | default=0.0 | Total inventory value |
| `recommended_reduction_pct` | Float | default=0.0 | Recommended stock reduction |

### B.30 `rbi_assessments`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `assessment_id` | String(50) | **PK**, default=uuid | Assessment identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `analyzed_at` | DateTime | default=now | Assessment timestamp |
| `total_equipment` | Integer | default=0 | Equipment count assessed |
| `assessments` | JSON | nullable | list[RBIAssessment] |
| `high_risk_count` | Integer | default=0 | High-risk count |
| `overdue_count` | Integer | default=0 | Overdue inspections |

### B.31 `reports`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `report_id` | String(50) | **PK**, default=uuid | Report identifier |
| `report_type` | String(30) | NOT NULL | ReportType value |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `period_start` | DateTime | NOT NULL | Report period start |
| `period_end` | DateTime | NOT NULL | Report period end |
| `generated_at` | DateTime | default=now | Generation timestamp |
| `content` | JSON | nullable | Report content |
| `metadata_json` | JSON | nullable | Report metadata |

**Indexes:** `ix_reports_plant_type`

### B.32 `notifications`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `notification_id` | String(50) | **PK**, default=uuid | Notification identifier |
| `notification_type` | String(30) | NOT NULL | NotificationType value |
| `level` | String(20) | default="INFO" | NotificationLevel value |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `equipment_id` | String(100) | nullable | Equipment reference |
| `title` | String(300) | NOT NULL | Notification title |
| `message` | Text | default="" | Notification body |
| `acknowledged` | Boolean | default=False | Acknowledged flag |
| `created_at` | DateTime | default=now | Creation timestamp |
| `acknowledged_at` | DateTime | nullable | Acknowledgement timestamp |

### B.33 `rca_analyses`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `analysis_id` | String(50) | **PK**, default=uuid | Analysis identifier |
| `event_description` | Text | NOT NULL | Event description |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `equipment_id` | String(100) | nullable | Equipment reference |
| `level` | String(10) | default="LEVEL_1" | RCA level (1/2/3) |
| `status` | String(30) | default="OPEN" | RCAStatus value |
| `team_members` | JSON | nullable | Team member list |
| `analysis_5w2h` | JSON | nullable | Analysis5W2H data |
| `cause_effect` | JSON | nullable | CauseEffectDiagram |
| `evidence_5p` | JSON | nullable | list[Evidence5P] |
| `solutions` | JSON | nullable | list[Solution] |
| `created_at` | DateTime | default=now | Creation timestamp |
| `completed_at` | DateTime | nullable | Completion timestamp |

**Indexes:** `ix_rca_analyses_plant_status`

### B.34 `planning_kpi_snapshots`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `snapshot_id` | String(50) | **PK**, default=uuid | Snapshot identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `period_start` | Date | NOT NULL | Period start |
| `period_end` | Date | NOT NULL | Period end |
| `kpis` | JSON | nullable | list[PlanningKPIValue] |
| `overall_health` | String(20) | default="UNKNOWN" | HEALTHY, AT_RISK, CRITICAL |
| `on_target_count` | Integer | default=0 | KPIs on target |
| `below_target_count` | Integer | default=0 | KPIs below target |
| `calculated_at` | DateTime | default=now | Calculation timestamp |

**Indexes:** `ix_planning_kpi_plant_period`

### B.35 `de_kpi_snapshots`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `snapshot_id` | String(50) | **PK**, default=uuid | Snapshot identifier |
| `plant_id` | String(50) | NOT NULL | Plant reference |
| `period_start` | Date | NOT NULL | Period start |
| `period_end` | Date | NOT NULL | Period end |
| `kpis` | JSON | nullable | list[DEKPIValue] |
| `overall_compliance` | Float | default=0.0 | Overall compliance score |
| `program_score` | Float | default=0.0 | DE program score |
| `maturity_level` | String(20) | default="INITIAL" | INITIAL, DEVELOPING, ESTABLISHED, OPTIMIZING |
| `calculated_at` | DateTime | default=now | Calculation timestamp |

**Indexes:** `ix_de_kpi_plant_period`

### B.36 `user_feedback`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `feedback_id` | String(50) | **PK**, default=uuid | Feedback identifier |
| `page` | String(100) | NOT NULL | Page/feature name |
| `rating` | Integer | NOT NULL | Rating (1-5) |
| `comment` | Text | default="" | Free-text comment |
| `created_at` | DateTime | default=now | Submission timestamp |

### B.37 `fmeca_worksheets`

| Field | Type | Constraints | Description |
|-------|------|-------------|-------------|
| `worksheet_id` | String(50) | **PK**, default=uuid | Worksheet identifier |
| `equipment_id` | String(100) | indexed | Equipment reference |
| `equipment_tag` | String(100) | default="" | Equipment TAG |
| `equipment_name` | String(300) | default="" | Equipment name |
| `status` | String(20) | default="DRAFT" | FMECAWorksheetStatus value |
| `current_stage` | String(30) | default="STAGE_1_FUNCTIONS" | FMECAStage value |
| `rows` | JSON | nullable | Worksheet row data |
| `stage_completion` | JSON | nullable | Per-stage completion status |
| `analyst` | String(100) | default="" | Analyst name |
| `created_at` | DateTime | default=now | Creation timestamp |
| `completed_at` | DateTime | nullable | Completion timestamp |

---

## Section C: API Endpoints

All router endpoints from `api/routers/`.

---

### C.1 Hierarchy (`/hierarchy`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| GET | `/hierarchy/plants` | -- | plant_id, name, name_fr, location |
| POST | `/hierarchy/plants` | plant_id, name, name_fr, name_ar, location | plant_id, name |
| GET | `/hierarchy/nodes` | ?plant_id, ?node_type, ?parent_node_id | node_id, node_type, name, name_fr, code, parent_node_id, level, plant_id, tag, criticality, status, metadata |
| POST | `/hierarchy/nodes` | node_type, name, code, level, plant_id, parent_node_id, tag, status, metadata | (same as GET node) |
| GET | `/hierarchy/nodes/{node_id}` | -- | node_id, node_type, name, name_fr, code, parent_node_id, level, plant_id, tag, criticality, status, metadata |
| GET | `/hierarchy/nodes/{node_id}/tree` | -- | list of node objects |
| GET | `/hierarchy/stats` | ?plant_id | dict of node_type counts |

### C.2 Criticality (`/criticality`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/criticality/assess` | node_id, criteria_scores, probability, ?method, ?assessed_by | assessment_id, node_id, overall_score, risk_class, criteria_scores, probability, status |
| GET | `/criticality/{node_id}` | -- | assessment_id, node_id, overall_score, risk_class, criteria_scores, probability, status |
| PUT | `/criticality/{assessment_id}/approve` | -- | assessment_id, status |
| POST | `/criticality/risk-class` | overall_score | risk_class result |

### C.3 FMEA (`/fmea`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/fmea/failure-modes` | functional_failure_id, what, mechanism, cause, failure_consequence, strategy_type, ... | failure_mode_id, what, mechanism, cause, strategy_type |
| GET | `/fmea/failure-modes/{fm_id}` | -- | failure_mode_id, what, mechanism, cause, failure_consequence, strategy_type, failure_effect |
| GET | `/fmea/failure-modes` | ?functional_failure_id | list: failure_mode_id, what, mechanism, cause, strategy_type |
| POST | `/fmea/validate-combination` | mechanism, cause | validation result |
| GET | `/fmea/fm-combinations` | ?mechanism | valid combinations |
| POST | `/fmea/rcm-decide` | (RCM decision inputs) | strategy recommendation |
| POST | `/fmea/functions` | node_id, function_type, description, description_fr | function_id, node_id, function_type |
| POST | `/fmea/functional-failures` | function_id, failure_type, description, description_fr | failure_id, function_id, failure_type |
| POST | `/fmea/fmeca/worksheets` | equipment_id, equipment_tag, equipment_name, analyst | worksheet data |
| GET | `/fmea/fmeca/worksheets/{worksheet_id}` | -- | full worksheet data |
| POST | `/fmea/fmeca/rpn` | severity, occurrence, detection | rpn_value, rpn_category |
| PUT | `/fmea/fmeca/worksheets/{worksheet_id}/run-decisions` | -- | updated worksheet with RCM decisions |
| GET | `/fmea/fmeca/worksheets/{worksheet_id}/summary` | -- | summary statistics |

### C.4 Tasks (`/tasks`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/tasks/` | name, task_type, constraint, frequency_value, frequency_unit, ... | task_id, name, task_type, status |
| GET | `/tasks/{task_id}` | -- | task_id, name, task_type, constraint, frequency_value, frequency_unit, status, labour_resources, material_resources |
| GET | `/tasks/` | ?failure_mode_id, ?status | list: task_id, name, task_type, status |
| POST | `/tasks/link-fm/{task_id}/{fm_id}` | -- | task_id, failure_mode_id |
| POST | `/tasks/validate-name` | name, ?task_type | validation result |
| POST | `/tasks/validate-wp-name` | name | validation result |

### C.5 Work Packages (`/work-packages`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/work-packages/` | name, code, node_id, frequency_value, frequency_unit, constraint, work_package_type | work_package_id, name, code, status |
| GET | `/work-packages/{wp_id}` | -- | work_package_id, name, code, node_id, frequency_value, frequency_unit, constraint, work_package_type, status, allocated_tasks, labour_summary |
| GET | `/work-packages/` | ?node_id, ?status | list: work_package_id, name, code, status |
| PUT | `/work-packages/{wp_id}/approve` | -- | work_package_id, status |
| POST | `/work-packages/group` | items (list of tasks) | grouped work packages |
| POST | `/work-packages/{wp_id}/work-instruction` | equipment_name, equipment_tag, tasks | work instruction document |

### C.6 SAP (`/sap`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/sap/generate-upload` | plant_code, maintenance_plan, maintenance_items, task_lists | package_id, status |
| GET | `/sap/uploads/{package_id}` | -- | package_id, plant_code, status, generated_at, maintenance_plan, maintenance_items, task_lists |
| GET | `/sap/uploads` | ?plant_code | list: package_id, plant_code, status |
| PUT | `/sap/uploads/{package_id}/approve` | -- | approval result |
| POST | `/sap/validate-transition` | entity_type, current_state, target_state | validation result |
| GET | `/sap/mock/{transaction}` | -- | mock SAP data |

### C.7 Analytics (`/analytics`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/analytics/health-score` | node_id, plant_id, equipment_tag, risk_class, ?pending_backlog_hours, ?capacity_hours_per_week, ?total_failure_modes, ?fm_with_strategy, ?active_alerts, ?critical_alerts, ?planned_wo, ?executed_on_time | AssetHealthScore |
| POST | `/analytics/kpis` | plant_id, ?failure_dates, ?total_period_hours, ?total_downtime_hours | KPIMetrics |
| POST | `/analytics/weibull-fit` | failure_intervals | WeibullParameters |
| POST | `/analytics/weibull-predict` | equipment_id, equipment_tag, failure_intervals, current_age_days, ?confidence_level | FailurePrediction |
| POST | `/analytics/variance-detect` | snapshots | list of PlantVarianceAlert |
| GET | `/analytics/variance-alerts` | -- | list: alert_id, plant_id, metric_name, z_score, variance_level |

### C.8 Capture (`/capture`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/capture/` | technician_id, capture_type, language, raw_text, raw_voice_text, images, equipment_tag_manual, location_hint | capture result with work request |
| GET | `/capture/` | -- | list: capture_id, technician_id, capture_type, language, equipment_tag_manual, created_at |
| GET | `/capture/{capture_id}` | -- | capture_id, technician_id, capture_type, language, raw_text, raw_voice_text, equipment_tag_manual, location_hint, created_at |

### C.9 Work Requests (`/work-requests`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| GET | `/work-requests/` | ?status | list: request_id, status, equipment_tag, equipment_confidence, ai_classification, created_at |
| GET | `/work-requests/{request_id}` | -- | request_id, source_capture_id, status, equipment_id, equipment_tag, equipment_confidence, problem_description, ai_classification, spare_parts, image_analysis, validation, created_at |
| PUT | `/work-requests/{request_id}/validate` | action (APPROVE/REJECT/MODIFY), ?modifications | validation result |
| POST | `/work-requests/{request_id}/classify` | -- | classification result |

### C.10 Planner (`/planner`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/planner/{work_request_id}/recommend` | -- | recommendation result |
| GET | `/planner/recommendations/{recommendation_id}` | -- | recommendation_id, work_request_id, planner_action, ai_confidence, resource_analysis, scheduling_suggestion, risk_assessment, generated_at |
| PUT | `/planner/recommendations/{recommendation_id}/action` | action (APPROVE/MODIFY/ESCALATE/DEFER), ?modifications | action result |

### C.11 Backlog (`/backlog`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| GET | `/backlog/` | ?status, ?priority, ?equipment_tag | backlog items list |
| POST | `/backlog/add/{work_request_id}` | -- | added backlog item |
| POST | `/backlog/optimize` | ?plant_id, ?period_days | optimization result |
| GET | `/backlog/optimizations/{optimization_id}` | -- | optimization_id, plant_id, status, total_items, stratification, work_packages, schedule, alerts, generated_at |
| PUT | `/backlog/optimizations/{optimization_id}/approve` | -- | approval result |
| GET | `/backlog/schedule` | -- | current schedule |

### C.12 Scheduling (`/scheduling`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/scheduling/programs` | ?plant_id, ?week_number, ?year | program data |
| GET | `/scheduling/programs` | ?plant_id, ?status | list of programs |
| GET | `/scheduling/programs/{program_id}` | -- | program_id, plant_id, week_number, year, status, total_hours, work_packages, resource_slots, conflicts, support_tasks, created_at, finalized_at |
| PUT | `/scheduling/programs/{program_id}/finalize` | -- | finalization result |
| PUT | `/scheduling/programs/{program_id}/activate` | -- | activation result |
| PUT | `/scheduling/programs/{program_id}/complete` | -- | completion result |
| GET | `/scheduling/programs/{program_id}/gantt` | -- | Gantt chart data |
| GET | `/scheduling/programs/{program_id}/gantt/export` | -- | Excel file download |

### C.13 Reliability (`/reliability`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/reliability/spare-parts/analyze` | ?plant_id, parts | SparePartOptimizationResult |
| POST | `/reliability/shutdowns` | plant_id, name, planned_start, planned_end, work_orders | shutdown data |
| GET | `/reliability/shutdowns/{shutdown_id}` | -- | full shutdown data |
| PUT | `/reliability/shutdowns/{shutdown_id}/start` | -- | updated shutdown |
| PUT | `/reliability/shutdowns/{shutdown_id}/complete` | -- | completed shutdown |
| POST | `/reliability/moc` | plant_id, title, description, category, requester_id, affected_equipment, risk_level | MoC data |
| GET | `/reliability/moc` | ?plant_id, ?status | list of MoCs |
| GET | `/reliability/moc/{moc_id}` | -- | full MoC data |
| PUT | `/reliability/moc/{moc_id}/advance` | action, ... | updated MoC |
| POST | `/reliability/ocr/analyze` | equipment_id, failure_rate, mttr_hours, cost_per_failure, cost_per_pm, current_pm_interval_days | OCRAnalysisResult |
| POST | `/reliability/jackknife/analyze` | ?plant_id, equipment_data | JackKnifeResult |
| POST | `/reliability/pareto/analyze` | ?plant_id, ?metric_type, records | ParetoResult |
| POST | `/reliability/lcc/calculate` | equipment_id, acquisition_cost, installation_cost, annual_operating_cost, annual_maintenance_cost, expected_life_years, discount_rate, salvage_value | LCCResult |
| POST | `/reliability/rbi/assess` | ?plant_id, equipment_list | RBIResult |

### C.14 Reporting (`/reporting`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/reporting/reports/weekly` | ?plant_id, week/week_number, year, ... | WeeklyReport |
| POST | `/reporting/reports/monthly` | ?plant_id, month, year, ... | MonthlyKPIReport |
| POST | `/reporting/reports/quarterly` | ?plant_id, quarter, year, ... | QuarterlyReviewReport |
| GET | `/reporting/reports` | ?plant_id, ?report_type | list of reports |
| GET | `/reporting/reports/{report_id}` | -- | full report data |
| POST | `/reporting/de-kpis/calculate` | (DEKPIInput fields) | DEKPIs |
| POST | `/reporting/de-kpis/program-health` | (DE KPI data) | DEProgramHealth |
| POST | `/reporting/notifications/generate` | plant_id, config | NotificationResult |
| GET | `/reporting/notifications` | ?plant_id, ?level | list of notifications |
| PUT | `/reporting/notifications/{notification_id}/ack` | -- | acknowledgement result |
| POST | `/reporting/import/validate` | source, rows | ImportResult |
| POST | `/reporting/export` | export_type, ... | ExportResult |
| POST | `/reporting/cross-module/analyze` | plant_id, ... | CrossModuleSummary |

### C.15 RCA (`/rca`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/rca/analyses` | event_description, ?plant_id, ?equipment_id, ?max_consequence, ?frequency, ?team_members | RCA analysis data |
| GET | `/rca/analyses` | ?plant_id, ?status | list of RCA analyses |
| GET | `/rca/analyses/summary` | ?plant_id | summary statistics |
| GET | `/rca/analyses/{analysis_id}` | -- | full RCA analysis |
| POST | `/rca/analyses/{analysis_id}/5w2h` | what, when, where, who, why, how, how_much | 5W+2H result |
| PUT | `/rca/analyses/{analysis_id}/advance` | status | status transition result |
| POST | `/rca/planning-kpis/calculate` | (PlanningKPIInput fields) | PlanningKPIs |
| GET | `/rca/planning-kpis` | ?plant_id | list of snapshots |
| POST | `/rca/de-kpis/calculate` | (DEKPIInput fields) | DEKPIs |
| GET | `/rca/de-kpis` | ?plant_id | list of DE KPI snapshots |

### C.16 Dashboard (`/dashboard`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| GET | `/dashboard/executive/{plant_id}` | -- | plant_id, total_reports, recent_reports, total_notifications, critical_alerts, recent_notifications |
| GET | `/dashboard/kpi-summary/{plant_id}` | -- | plant_id, has_data, report |
| GET | `/dashboard/alerts/{plant_id}` | -- | plant_id, total_active, alerts |

### C.17 Admin (`/admin`)

| Method | Path | Request Fields | Response Fields |
|--------|------|---------------|-----------------|
| POST | `/admin/seed-database` | -- | seed result |
| GET | `/admin/audit-log` | ?entity_type, ?limit | list: id, entity_type, entity_id, action, user, timestamp |
| GET | `/admin/stats` | -- | plants, hierarchy_nodes, total_nodes |
| DELETE | `/admin/reset-database` | -- | status confirmation |
| GET | `/admin/agent-status` | -- | agent status data |
| POST | `/admin/feedback` | page, rating, comment | feedback_id, status |
| GET | `/admin/feedback` | ?page, ?limit | list: feedback_id, page, rating, comment, created_at |

---

## Section D: KPI Definitions

---

### D.1 Planning KPIs (11 KPIs -- GFSN REF-14 S8)

Source: `tools/engines/planning_kpi_engine.py`

| # | KPI Name | Formula | GFSN Target | Unit |
|---|----------|---------|-------------|------|
| 1 | **WO Completion Rate** | `wo_completed / wo_planned * 100` | >= 90% | % |
| 2 | **Man-hour Compliance** | `manhours_actual / manhours_planned * 100` | 85--115% | % |
| 3 | **PM Plan Compliance** | `pm_executed / pm_planned * 100` | >= 95% | % |
| 4 | **Backlog Weeks** | `backlog_hours / weekly_capacity_hours` | <= 4 weeks | weeks |
| 5 | **Reactive Work %** | `corrective_count / total_wo * 100` | <= 20% | % |
| 6 | **Schedule Adherence** | `schedule_compliance_executed / schedule_compliance_planned * 100` | >= 85% | % |
| 7 | **Release Horizon** | `release_horizon_days` (direct input) | <= 7 days | days |
| 8 | **Pending Notices %** | `pending_notices / total_notices * 100` | <= 15% | % |
| 9 | **Scheduled Capacity** | `scheduled_capacity_hours / total_capacity_hours * 100` | 80--95% | % |
| 10 | **Proactive Work %** | `proactive_wo / total_wo * 100` | >= 70% | % |
| 11 | **Planning Efficiency** | `planned_wo / total_wo * 100` | >= 85% | % |

**Overall Health Classification:**
>
- >= 9 KPIs on target: `HEALTHY`
- 6-8 KPIs on target: `AT_RISK`
- < 6 KPIs on target: `CRITICAL`

---

### D.2 Defect Elimination KPIs (5 KPIs -- GFSN REF-15)

Source: `tools/engines/rca_engine.py` (compute_de_kpis), `tools/engines/de_kpi_engine.py`

| # | KPI Name | Formula | Target | Unit |
|---|----------|---------|--------|------|
| 1 | **Event Reporting Compliance** | `events_reported / events_required * 100` | >= 95% | % |
| 2 | **Meeting Compliance** | `meetings_held / meetings_required * 100` | >= 90% | % |
| 3 | **Implementation Progress** | `actions_implemented / actions_planned * 100` | >= 80% | % |
| 4 | **Savings Effectiveness** | `savings_achieved / savings_target * 100` | >= 70% | % |
| 5 | **Frequency Reduction** | `(failures_previous - failures_current) / failures_previous * 100` | >= 10% | % |

**DE Program Maturity Levels** (from `DEKPIEngine.assess_program_health`):

- Score >= 80: `OPTIMIZING`
- Score >= 60: `ESTABLISHED`
- Score >= 40: `DEVELOPING`
- Score < 40: `INITIAL`

---

### D.3 Core Reliability KPIs (7 KPIs -- ISO 55002 S9.1)

Source: `tools/engines/kpi_engine.py`

| # | KPI Name | Formula | Description |
|---|----------|---------|-------------|
| 1 | **MTBF** | `sum(intervals between failure dates) / count(intervals)` | Mean Time Between Failures in days. Requires >= 2 failure events. |
| 2 | **MTTR** | `sum(repair_durations) / count(repairs)` | Mean Time To Repair in hours. Only positive durations counted. |
| 3 | **Availability** | `(total_period_hours - total_downtime_hours) / total_period_hours * 100` | Uptime percentage (0-100%). |
| 4 | **OEE** | `(availability/100) * (performance/100) * (quality/100) * 100` | Overall Equipment Effectiveness. Performance and quality default to 100% in MVP. |
| 5 | **Schedule Compliance** | `executed_on_time / planned_count * 100` | Percentage of WOs completed on schedule. |
| 6 | **PM Compliance** | `pm_executed / pm_planned * 100` | Preventive maintenance execution rate. |
| 7 | **Reactive Ratio** | `corrective_count / total_count * 100` | Percentage of work that is corrective/reactive. |

---

### D.4 Asset Health Index (5 Dimensions -- REF-12 Rec 4)

Source: `tools/engines/health_score_engine.py`

| # | Dimension | Default Weight | Score Calculation | Details |
|---|-----------|---------------|-------------------|---------|
| 1 | **Criticality** | 0.25 | Risk class mapping: I_LOW=90, II_MEDIUM=70, III_HIGH=40, IV_CRITICAL=15 | Inverse: higher criticality = lower health score |
| 2 | **Backlog Pressure** | 0.20 | `100 * (1 - weeks_of_backlog / 8)` where weeks = pending_hours / capacity_per_week | 0 pending = 100 (healthy); >= 8 weeks backlog = 0 |
| 3 | **Strategy Coverage** | 0.25 | `100 * fm_with_strategy / total_failure_modes` | Percentage of failure modes covered by approved strategy |
| 4 | **Condition Status** | 0.15 | `100 * (1 - (active_alerts + critical_alerts * 2) / 10)` | Critical alerts weighted 3x; max threshold = 10 |
| 5 | **Execution Compliance** | 0.15 | `100 * executed_on_time / planned_wo` | On-time work order execution rate |

**Composite Score:** `sum(dimension_score * weight) / sum(weights)`

**Health Classification:**
>
- >= 75: `HEALTHY`
- >= 50: `AT_RISK`
- > 0: `CRITICAL`
- 0: `UNKNOWN`

**Trend Detection:** Delta > 5 = `IMPROVING`; Delta < -5 = `DEGRADING`; else `STABLE`

---

## Section E: 72 Valid Failure Mode Combinations

The authoritative lookup table from `VALID_FM_COMBINATIONS` in `tools/models/schemas.py`.
Source: SRC-09 -- "Failure Modes (Mechanism + Cause).xlsx".
Any `FailureMode` must use one of these 72 mechanism+cause pairs.

| # | Mechanism | Cause |
|---|-----------|-------|
| 1 | ARCS | BREAKDOWN_IN_INSULATION |
| 2 | BLOCKS | CONTAMINATION |
| 3 | BLOCKS | EXCESSIVE_PARTICLE_SIZE |
| 4 | BLOCKS | INSUFFICIENT_FLUID_VELOCITY |
| 5 | BREAKS_FRACTURE_SEPARATES | CYCLIC_LOADING |
| 6 | BREAKS_FRACTURE_SEPARATES | MECHANICAL_OVERLOAD |
| 7 | BREAKS_FRACTURE_SEPARATES | THERMAL_OVERLOAD |
| 8 | CORRODES | BIO_ORGANISMS |
| 9 | CORRODES | CHEMICAL_ATTACK |
| 10 | CORRODES | CORROSIVE_ENVIRONMENT |
| 11 | CORRODES | CREVICE |
| 12 | CORRODES | DISSIMILAR_METALS_CONTACT |
| 13 | CORRODES | EXPOSURE_TO_ATMOSPHERE |
| 14 | CORRODES | EXPOSURE_TO_HIGH_TEMP_CORROSIVE |
| 15 | CORRODES | EXPOSURE_TO_HIGH_TEMP |
| 16 | CORRODES | EXPOSURE_TO_LIQUID_METAL |
| 17 | CORRODES | POOR_ELECTRICAL_CONNECTIONS |
| 18 | CORRODES | POOR_ELECTRICAL_INSULATION |
| 19 | CRACKS | AGE |
| 20 | CRACKS | CYCLIC_LOADING |
| 21 | CRACKS | EXCESSIVE_TEMPERATURE |
| 22 | CRACKS | HIGH_TEMP_CORROSIVE |
| 23 | CRACKS | IMPACT_SHOCK_LOADING |
| 24 | CRACKS | THERMAL_STRESSES |
| 25 | DEGRADES | AGE |
| 26 | DEGRADES | CHEMICAL_ATTACK |
| 27 | DEGRADES | CHEMICAL_REACTION |
| 28 | DEGRADES | CONTAMINATION |
| 29 | DEGRADES | ELECTRICAL_ARCING |
| 30 | DEGRADES | ENTRAINED_AIR |
| 31 | DEGRADES | EXCESSIVE_TEMPERATURE |
| 32 | DEGRADES | RADIATION |
| 33 | DISTORTS | IMPACT_SHOCK_LOADING |
| 34 | DISTORTS | MECHANICAL_OVERLOAD |
| 35 | DISTORTS | OFF_CENTER_LOADING |
| 36 | DISTORTS | USE |
| 37 | DRIFTS | EXCESSIVE_TEMPERATURE |
| 38 | DRIFTS | IMPACT_SHOCK_LOADING |
| 39 | DRIFTS | STRAY_CURRENT |
| 40 | DRIFTS | UNEVEN_LOADING |
| 41 | DRIFTS | USE |
| 42 | EXPIRES | AGE |
| 43 | IMMOBILISED | CONTAMINATION |
| 44 | IMMOBILISED | LACK_OF_LUBRICATION |
| 45 | LOOSES_PRELOAD | CREEP |
| 46 | LOOSES_PRELOAD | EXCESSIVE_TEMPERATURE |
| 47 | LOOSES_PRELOAD | VIBRATION |
| 48 | OPEN_CIRCUIT | ELECTRICAL_OVERLOAD |
| 49 | OVERHEATS_MELTS | CONTAMINATION |
| 50 | OVERHEATS_MELTS | ELECTRICAL_OVERLOAD |
| 51 | OVERHEATS_MELTS | LACK_OF_LUBRICATION |
| 52 | OVERHEATS_MELTS | MECHANICAL_OVERLOAD |
| 53 | OVERHEATS_MELTS | RELATIVE_MOVEMENT |
| 54 | OVERHEATS_MELTS | RUBBING |
| 55 | SEVERS | ABRASION |
| 56 | SEVERS | IMPACT_SHOCK_LOADING |
| 57 | SEVERS | MECHANICAL_OVERLOAD |
| 58 | SHORT_CIRCUITS | BREAKDOWN_IN_INSULATION |
| 59 | SHORT_CIRCUITS | CONTAMINATION |
| 60 | THERMALLY_OVERLOADS | MECHANICAL_OVERLOAD |
| 61 | THERMALLY_OVERLOADS | OVERCURRENT |
| 62 | WASHES_OFF | EXCESSIVE_FLUID_VELOCITY |
| 63 | WASHES_OFF | USE |
| 64 | WEARS | BREAKDOWN_OF_LUBRICATION |
| 65 | WEARS | ENTRAINED_AIR |
| 66 | WEARS | EXCESSIVE_FLUID_VELOCITY |
| 67 | WEARS | IMPACT_SHOCK_LOADING |
| 68 | WEARS | LOW_PRESSURE |
| 69 | WEARS | LUBRICANT_CONTAMINATION |
| 70 | WEARS | MECHANICAL_OVERLOAD |
| 71 | WEARS | METAL_TO_METAL_CONTACT |
| 72 | WEARS | RELATIVE_MOVEMENT |

---

## Section F: Excel Template Schemas (14 Templates)

All `.xlsx` data-loading templates generated by `templates/generate_templates.py`.
Each template includes OCP green headers, frozen panes, data validation dropdowns,
and 3-5 realistic phosphate example rows.

---

### F.1 Template 01: `01_equipment_hierarchy.xlsx`

Plant and equipment hierarchy nodes (18 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `plant_id` | String | required | Plant identifier (e.g., OCP-JFC1) |
| `plant_name` | String | required | Plant name |
| `area_code` | String | required | Area code (e.g., BRY) |
| `area_name` | String | required | Area name |
| `system_code` | String | required | System code |
| `system_name` | String | required | System name |
| `equipment_tag` | String | required | Equipment tag (e.g., BRY-SAG-ML-001) |
| `equipment_description` | String | required | Equipment description |
| `equipment_type` | String | dropdown: EquipmentCategory | Equipment type |
| `manufacturer` | String | - | OEM manufacturer |
| `model` | String | - | Model number |
| `serial_number` | String | - | Serial number |
| `power_kw` | Float | - | Rated power (kW) |
| `weight_kg` | Float | - | Weight (kg) |
| `criticality` | String | dropdown: EquipmentCriticality | Criticality grade |
| `status` | String | dropdown: EquipmentStatus | Equipment status |
| `sap_func_loc` | String | - | SAP functional location |
| `installation_date` | Date | YYYY-MM-DD | Installation date |

### F.2 Template 02: `02_criticality_assessment.xlsx`

Criticality assessment scores (14 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `equipment_tag` | String | required | Equipment tag reference |
| `method` | String | dropdown: CriticalityMethod | R8 or GFSN method |
| `safety` | Integer | 1-5 | Safety consequence score |
| `health` | Integer | 1-5 | Health consequence score |
| `environment` | Integer | 1-5 | Environment consequence score |
| `production` | Integer | 1-5 | Production consequence score |
| `operating_cost` | Integer | 1-5 | Operating cost score |
| `capital_cost` | Integer | 1-5 | Capital cost score |
| `schedule` | Integer | 1-5 | Schedule impact score |
| `revenue` | Integer | 1-5 | Revenue impact score |
| `communications` | Integer | 1-5 | Communications impact score |
| `compliance` | Integer | 1-5 | Compliance impact score |
| `reputation` | Integer | 1-5 | Reputation impact score |
| `probability` | Integer | 1-5 | Probability of occurrence |

### F.3 Template 03: `03_failure_modes.xlsx`

FMEA failure modes and causes (15 fields + reference sheet).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `equipment_tag` | String | required | Equipment tag reference |
| `function_description` | String | required | Function description |
| `function_type` | String | dropdown: FunctionType | PRIMARY, SECONDARY, PROTECTIVE |
| `failure_type` | String | dropdown: FailureType | TOTAL or PARTIAL |
| `what_component` | String | required | Component that fails (uppercase, singular) |
| `mechanism` | String | dropdown: Mechanism | Failure mechanism (18 values) |
| `cause` | String | dropdown: Cause | Failure cause (must be valid 72-combo pair) |
| `failure_pattern` | String | dropdown: FailurePattern | Nowlan-Heap pattern (A-F) |
| `failure_consequence` | String | dropdown: FailureConsequence | Consequence classification |
| `evidence` | String | required | Observable evidence of failure |
| `downtime_hours` | Float | >=0 | Estimated downtime |
| `detection_method` | String | - | How failure is detected |
| `rpn_severity` | Integer | 1-10 | RPN severity score |
| `rpn_occurrence` | Integer | 1-10 | RPN occurrence score |
| `rpn_detection` | Integer | 1-10 | RPN detection score |

**Additional sheet:** "Valid FM Combinations" -- all 72 valid Mechanism+Cause pairs.

### F.4 Template 04: `04_maintenance_tasks.xlsx`

Maintenance task definitions (multi-sheet: Tasks, Task_Labour, Task_Materials, Task_Tools).

**Sheet 1: Tasks (14 fields)**

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `task_id` | String | required, PK | Unique task identifier |
| `task_name` | String | required, max 72 chars | Task name (SAP compatible) |
| `task_name_fr` | String | - | Task name (French) |
| `task_type` | String | dropdown: TaskType | INSPECT, CHECK, TEST, LUBRICATE, CLEAN, REPLACE, REPAIR, CALIBRATE |
| `constraint` | String | dropdown: TaskConstraint | ONLINE, OFFLINE, TEST_MODE |
| `access_time_hours` | Float | >=0 | Access/setup time |
| `budgeted_as` | String | dropdown: BudgetType | NOT_BUDGETED, REPAIR, REPLACE |
| `budgeted_life` | Float | - | Budgeted life value |
| `budgeted_life_time_units` | String | - | Time-based units |
| `budgeted_life_operational_units` | String | - | Operational units |
| `consequences` | String | - | Failure consequences |
| `justification` | String | - | Task justification |
| `origin` | String | - | Task origin reference |
| `notes` | String | - | Additional notes |

> **Note:** Tasks do NOT have frequency or acceptable limits. Those belong to the maintenance strategy (Template 14).

**Sheet 2: Task_Labour (8 fields)**

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `labour_id` | String | required, PK | Unique labour line ID |
| `task_id` | String | required, FK  Tasks | Parent task reference |
| `worker_id` | String | - | Worker identifier |
| `specialty` | String | dropdown: LabourSpecialty | Worker specialty |
| `quantity` | Integer | >=1 | Number of workers |
| `hours_per_person` | Float | >=0 | Hours per person |
| `hourly_rate_usd` | Float | >=0 | Hourly rate (USD) |
| `company` | String | - | Contractor company |

**Sheet 3: Task_Materials (10 fields)**

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `material_line_id` | String | required, PK | Unique material line ID |
| `task_id` | String | required, FK  Tasks | Parent task reference |
| `material_code` | String | required | SAP material code |
| `description` | String | required | Material description |
| `manufacturer` | String | - | Material manufacturer |
| `part_number` | String | - | Part number |
| `quantity` | Float | >=0 | Quantity required |
| `unit_of_measure` | String | dropdown: UnitOfMeasure | Unit |
| `unit_price_usd` | Float | >=0 | Unit price (USD) |
| `equipment_bom_ref` | String | - | BOM reference |

**Sheet 4: Task_Tools (5 fields)**

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `tool_line_id` | String | required, PK | Unique tool line ID |
| `task_id` | String | required, FK  Tasks | Parent task reference |
| `item_type` | String | - | TOOL or SPECIAL_EQUIPMENT |
| `tool_code` | String | required | Tool code |
| `description` | String | - | Tool description |

### F.5 Template 05: `05_work_packages.xlsx`

Work package groupings (11 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `wp_name` | String | required, max 40, ALL CAPS | Work package name |
| `wp_code` | String | required | WP code |
| `equipment_tag` | String | required | Equipment tag reference |
| `frequency_value` | Float | >=0 | Interval value |
| `frequency_unit` | String | dropdown: FrequencyUnit | Interval unit |
| `constraint` | String | dropdown: WPConstraint | ONLINE or OFFLINE |
| `wp_type` | String | dropdown: WPType | STANDALONE, SUPPRESSIVE, SEQUENTIAL |
| `access_time_hours` | Float | >=0 | Access/setup time |
| `task_ids_csv` | String | required | Comma-separated task IDs |
| `estimated_total_hours` | Float | >=0 | Total estimated hours |
| `crew_size` | Integer | >=1 | Crew size |

### F.6 Template 06: `06_work_order_history.xlsx`

Historical work order data (16 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `wo_id` | String | required | Work order ID |
| `order_type` | String | dropdown: WorkOrderType | Order type |
| `equipment_tag` | String | required | Equipment tag |
| `sap_func_loc` | String | - | SAP functional location |
| `priority` | String | dropdown: Priority | Priority level |
| `description` | String | required | WO description |
| `created_date` | Date | YYYY-MM-DD | Creation date |
| `planned_start` | Date | YYYY-MM-DD | Planned start |
| `planned_end` | Date | YYYY-MM-DD | Planned end |
| `actual_start` | Date | YYYY-MM-DD | Actual start |
| `actual_end` | Date | YYYY-MM-DD | Actual end |
| `duration_hours` | Float | >=0 | Duration (hours) |
| `status` | String | dropdown: WOHistoryStatus | WO status |
| `cost_labour_usd` | Float | >=0 | Labour cost |
| `cost_materials_usd` | Float | >=0 | Materials cost |
| `failure_found` | String | - | Failure found (Y/N or description) |

### F.7 Template 07: `07_spare_parts_inventory.xlsx`

Spare parts catalog (16 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `material_code` | String | required | SAP material code |
| `description` | String | required | Part description |
| `manufacturer` | String | - | Manufacturer |
| `part_number` | String | - | Part number |
| `ved_class` | String | dropdown: V,E,D | VED criticality |
| `fsn_class` | String | dropdown: F,S,N | FSN consumption |
| `abc_class` | String | dropdown: A,B,C | ABC cost class |
| `quantity_on_hand` | Integer | >=0 | Current stock |
| `min_stock` | Integer | >=0 | Minimum stock level |
| `max_stock` | Integer | >=0 | Maximum stock level |
| `reorder_point` | Integer | >=0 | Reorder point |
| `lead_time_days` | Integer | >=0 | Lead time (days) |
| `unit_cost_usd` | Float | >=0 | Unit cost (USD) |
| `unit_of_measure` | String | dropdown: UnitOfMeasure | Unit |
| `applicable_equipment_csv` | String | - | Comma-separated equipment tags |
| `warehouse_location` | String | - | Storage location |

### F.8 Template 08: `08_shutdown_calendar.xlsx`

Planned shutdown schedule (9 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `plant_id` | String | required | Plant identifier |
| `shutdown_name` | String | required | Shutdown name |
| `shutdown_type` | String | dropdown: ShutdownType | MAJOR, MINOR, TURNAROUND |
| `planned_start` | Date | YYYY-MM-DD | Planned start |
| `planned_end` | Date | YYYY-MM-DD | Planned end |
| `planned_hours` | Float | >=0 | Planned duration (hours) |
| `areas_csv` | String | - | Affected areas (comma-separated) |
| `description` | String | - | Shutdown description |
| `work_orders_csv` | String | - | Linked WO IDs (comma-separated) |

### F.9 Template 09: `09_workforce.xlsx`

Workforce and specialty data (9 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `worker_id` | String | required | Worker identifier |
| `name` | String | required | Worker name |
| `specialty` | String | dropdown: LabourSpecialty | Worker specialty |
| `shift` | String | dropdown: ShiftType | Shift assignment |
| `plant_id` | String | required | Plant identifier |
| `available` | Boolean | TRUE/FALSE | Availability flag |
| `certifications_csv` | String | - | Certifications (comma-separated) |
| `phone` | String | - | Phone number |
| `email` | String | - | Email address |

### F.10 Template 10: `10_field_capture.xlsx`

Field observation records (7 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `technician_id` | String | required | Technician ID |
| `capture_type` | String | dropdown: CaptureType | Capture type |
| `language` | String | dropdown: Language | Input language |
| `equipment_tag` | String | required | Equipment tag |
| `location_hint` | String | - | Location hint |
| `raw_text` | String | required | Raw observation text |
| `timestamp` | DateTime | ISO 8601 | Capture timestamp |

### F.11 Template 11: `11_rca_events.xlsx`

Root cause analysis events (10 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `event_description` | String | required | Event description |
| `plant_id` | String | required | Plant identifier |
| `equipment_tag` | String | required | Equipment tag |
| `level` | String | dropdown: RCALevel | GREEN, YELLOW, RED |
| `max_consequence` | String | - | Maximum consequence type |
| `frequency` | String | - | Event frequency |
| `event_date` | Date | YYYY-MM-DD | Event date |
| `downtime_hours` | Float | >=0 | Downtime caused |
| `production_loss_tonnes` | Float | >=0 | Production loss (tonnes) |
| `direct_cost_usd` | Float | >=0 | Direct cost (USD) |

### F.12 Template 12: `12_planning_kpi_input.xlsx`

Planning KPI input data (22 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `plant_id` | String | required | Plant identifier |
| `period_start` | Date | YYYY-MM-DD | Period start date |
| `period_end` | Date | YYYY-MM-DD | Period end date |
| `wo_planned` | Integer | >=0 | Work orders planned |
| `wo_completed` | Integer | >=0 | Work orders completed |
| `manhours_planned` | Float | >=0 | Man-hours planned |
| `manhours_actual` | Float | >=0 | Man-hours actual |
| `pm_planned` | Integer | >=0 | PM orders planned |
| `pm_executed` | Integer | >=0 | PM orders executed |
| `backlog_hours` | Float | >=0 | Backlog hours |
| `weekly_capacity_hours` | Float | >=0 | Weekly capacity |
| `corrective_count` | Integer | >=0 | Corrective WO count |
| `total_wo` | Integer | >=0 | Total WO count |
| `schedule_compliance_planned` | Integer | >=0 | Planned schedule items |
| `schedule_compliance_executed` | Integer | >=0 | Executed schedule items |
| `release_horizon_days` | Integer | >=0 | Release horizon (days) |
| `pending_notices` | Integer | >=0 | Pending notices |
| `total_notices` | Integer | >=0 | Total notices |
| `scheduled_capacity_hours` | Float | >=0 | Scheduled capacity |
| `total_capacity_hours` | Float | >=0 | Total capacity |
| `proactive_wo` | Integer | >=0 | Proactive WO count |
| `planned_wo` | Integer | >=0 | Planned WO count |

### F.13 Template 13: `13_de_kpi_input.xlsx`

Defect elimination KPI data (13 fields).

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `plant_id` | String | required | Plant identifier |
| `period_start` | Date | YYYY-MM-DD | Period start date |
| `period_end` | Date | YYYY-MM-DD | Period end date |
| `events_reported` | Integer | >=0 | Events reported |
| `events_required` | Integer | >=0 | Events requiring analysis |
| `meetings_held` | Integer | >=0 | DE meetings held |
| `meetings_required` | Integer | >=0 | DE meetings required |
| `actions_implemented` | Integer | >=0 | Actions implemented |
| `actions_planned` | Integer | >=0 | Actions planned |
| `savings_achieved` | Float | >=0 | Savings achieved (USD) |
| `savings_target` | Float | >=0 | Savings target (USD) |
| `failures_current` | Integer | >=0 | Current period failures |
| `failures_previous` | Integer | >=0 | Previous period failures |

### F.14 Template 14: `14_maintenance_strategy.xlsx`

Maintenance strategy linking failure modes to tasks with intervals and limits (31 fields + 2 reference sheets).

> This is the **core strategy template** that connects the FMEA analysis (Template 03) to maintenance tasks (Template 04). Each row represents a strategy record: one failure mode  one or two maintenance tasks, with frequency, acceptable limits, and justification.

| Field | Type | Validation | Description |
|-------|------|-----------|-------------|
| `strategy_id` | String | required | Unique strategy identifier |
| `equipment_tag` | String | required | Equipment tag reference |
| `maintainable_item` | String | required | Maintainable item name |
| `function_and_failure` | String | required | Function and failure description |
| `what` | String | required | FM "what" component |
| `mechanism` | String | dropdown: Mechanism | Failure mechanism (18 values) |
| `cause` | String | dropdown: Cause | Failure cause (72-combo validated) |
| `status` | String | dropdown: ACTIVE, DRAFT, ELIMINATED | Strategy status |
| `tactics_type` | String | dropdown: StrategyType | CBM, TBM, FBM, RTF, FFI, REDESIGN |
| `primary_task_id` | String | required, FK  Tasks | Primary task reference |
| `primary_task_interval` | Float | >=0 | Primary task interval value |
| `operational_units` | String | - | Operational interval units |
| `time_units` | String | dropdown: FrequencyUnit | Time-based interval units |
| `primary_task_acceptable_limits` | String | - | Measurable acceptance criteria |
| `primary_task_conditional_comments` | String | - | Conditional notes |
| `primary_task_constraint` | String | dropdown: TaskConstraint | ONLINE, OFFLINE, TEST_MODE |
| `primary_task_task_type` | String | dropdown: TaskType | Primary task type |
| `primary_task_access_time` | Float | >=0 | Primary task access time |
| `secondary_task_id` | String | FK  Tasks | Secondary task reference |
| `secondary_task_constraint` | String | dropdown: TaskConstraint | Secondary task constraint |
| `secondary_task_task_type` | String | dropdown: TaskType | Secondary task type |
| `secondary_task_access_time` | Float | >=0 | Secondary task access time |
| `secondary_task_comments` | String | - | Secondary task notes |
| `budgeted_as` | String | dropdown: BudgetType | NOT_BUDGETED, REPAIR, REPLACE |
| `budgeted_life` | Float | - | Budgeted life value |
| `budgeted_life_time_units` | String | - | Budgeted life time units |
| `budgeted_life_operational_units` | String | - | Budgeted life operational units |
| `existing_task` | String | - | Reference to existing task (if any) |
| `justification_category` | String | dropdown: JustificationCategory | Justification category |
| `justification` | String | - | Strategy justification text |
| `notes` | String | - | Additional notes |

**Additional sheet 1:** "Valid FM Combinations" -- all 72 valid Mechanism+Cause pairs.

**Additional sheet 2:** "Strategy Type Rules" -- 6 maintenance strategy types with selection criteria:

| Strategy | When to Use |
|----------|-------------|
| `CBM` | Condition-Based: detectable P-F interval, feasible monitoring |
| `TBM` | Time-Based: age-related pattern, known useful life |
| `FBM` | Failure-Based: redesign not justified, low consequence RTF |
| `RTF` | Run-to-Failure: non-critical, no safety/environmental consequence |
| `FFI` | Failure-Finding Interval: hidden failure, protective function |
| `REDESIGN` | Redesign: no applicable task, unacceptable risk |

---

*End of variable listing.*
