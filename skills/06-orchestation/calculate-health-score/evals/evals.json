[
  {
    "id": "health-eval-001",
    "name": "SAG Mill AT_RISK with IMPROVING Trend",
    "description": "Full health score calculation for SAG Mill with previous score for trend",
    "input": {
      "node_id": "BRY-SAG-ML-001",
      "plant_id": "OCP-JFC1",
      "equipment_tag": "BRY-SAG-ML-001",
      "risk_class": "III_HIGH",
      "pending_backlog_hours": 120,
      "capacity_hours_per_week": 40,
      "total_failure_modes": 24,
      "fm_with_strategy": 18,
      "active_alerts": 3,
      "critical_alerts": 1,
      "planned_wo": 20,
      "executed_on_time": 16,
      "previous_score": 55.0
    },
    "expected": {
      "dimensions": {
        "criticality": 40.0,
        "backlog_pressure": 62.5,
        "strategy_coverage": 75.0,
        "condition_status": 50.0,
        "execution_compliance": 80.0
      },
      "composite_score": 60.8,
      "health_class": "AT_RISK",
      "trend": "IMPROVING"
    },
    "assertions": [
      "Criticality III_HIGH = 40",
      "Backlog: 120/40=3 weeks, 100*(1-3/8)=62.5",
      "Strategy: 100*18/24=75.0",
      "Condition: 3+(1*2)=5, 100*(1-5/10)=50.0",
      "Execution: 100*16/20=80.0",
      "Composite = 60.8",
      "60.8 >= 50 = AT_RISK",
      "delta=5.8 > 5 = IMPROVING"
    ]
  },
  {
    "id": "health-eval-002",
    "name": "HEALTHY Equipment - Low Risk, No Issues",
    "description": "Low criticality equipment with excellent metrics should be HEALTHY",
    "input": {
      "risk_class": "I_LOW",
      "pending_backlog_hours": 10,
      "capacity_hours_per_week": 40,
      "total_failure_modes": 10,
      "fm_with_strategy": 10,
      "active_alerts": 0,
      "critical_alerts": 0,
      "planned_wo": 15,
      "executed_on_time": 14
    },
    "expected": {
      "dimensions": {
        "criticality": 90.0,
        "backlog_pressure": 96.9,
        "strategy_coverage": 100.0,
        "condition_status": 100.0,
        "execution_compliance": 93.3
      },
      "health_class": "HEALTHY"
    },
    "assertions": [
      "I_LOW = 90",
      "Backlog: 10/40=0.25 weeks, ~96.9",
      "Strategy: 100*10/10=100",
      "Condition: 0 alerts = 100",
      "Execution: 100*14/15=93.3",
      "Composite well above 75 = HEALTHY"
    ]
  },
  {
    "id": "health-eval-003",
    "name": "CRITICAL Equipment - All Dimensions Poor",
    "description": "IV_CRITICAL with high backlog, low coverage, many alerts, poor execution",
    "input": {
      "risk_class": "IV_CRITICAL",
      "pending_backlog_hours": 400,
      "capacity_hours_per_week": 40,
      "total_failure_modes": 20,
      "fm_with_strategy": 4,
      "active_alerts": 8,
      "critical_alerts": 3,
      "planned_wo": 20,
      "executed_on_time": 5
    },
    "expected": {
      "health_class": "CRITICAL",
      "recommendations_count": 5
    },
    "assertions": [
      "Criticality IV_CRITICAL = 15 (< 50)",
      "Backlog: 400/40=10 weeks, clamped to 0 (< 50)",
      "Strategy: 100*4/20=20 (< 50)",
      "Condition: 8+(3*2)=14, clamped to 0 (< 50)",
      "Execution: 100*5/20=25 (< 50)",
      "All 5 dimensions below 50 = all recommendations generated",
      "Composite well below 50 = CRITICAL"
    ]
  },
  {
    "id": "health-eval-004",
    "name": "Trend Boundary Test - Exactly 5.0 Delta",
    "description": "Delta of exactly 5.0 should be STABLE, not IMPROVING",
    "input": {
      "composite_current": 60.0,
      "previous_score": 55.0
    },
    "expected": {
      "delta": 5.0,
      "trend": "STABLE"
    },
    "assertions": [
      "delta = 60.0 - 55.0 = 5.0",
      "5.0 is NOT > 5.0 (strict inequality)",
      "Trend = STABLE, not IMPROVING"
    ]
  }
]
